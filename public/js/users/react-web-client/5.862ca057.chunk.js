(this["webpackJsonpuser-react-web-client"]=this["webpackJsonpuser-react-web-client"]||[]).push([[5],{33:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return r}));var s,n,c="is-info",r="/v1";!function(e){e.A="admin",e.M="marketing",e.C="content-manager"}(s||(s={})),function(e){e.M="manager",e.T="tech-support"}(n||(n={}))},39:function(e,t,a){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}a.d(t,"a",(function(){return s}))},40:function(e,t,a){"use strict";var s=a(0),n=(a(1),a(41));t.a=function(e){var t=e.message,a=e.type,c=e.onClickHandler;return Object(s.jsxs)(n.Notification,{color:a,onClick:c,children:[t,Object(s.jsx)(n.Button,{remove:!0})]})}},54:function(e,t,a){"use strict";a.r(t),a.d(t,"AppContext",(function(){return W}));var s,n,c,r,l=a(35),i=a(0),o=a(1),d=a.n(o),j=a(34),u=function(e,t){switch(t.type){case"FetchDataSuccess":return Object(j.a)(Object(j.a)({},e),{},{users:t.payload.users,usersCount:t.payload.usersCount,actionButtonState:t.payload.actionButtonState});case"FetchDataFailure":return Object(j.a)(Object(j.a)({},e),{},{alert:{show:!0,type:"danger",message:"Could not load remote data: ".concat(t.payload.error)},actionButtonState:t.payload.actionButtonState});case"HandleViewUser":return Object(j.a)(Object(j.a)({},e),{},{onViewUser:!0,onAddUser:!1,onEditUser:!1,user:t.payload.user});case"HandleCloseViewUser":return Object(j.a)(Object(j.a)({},e),{},{onViewUser:!1,user:null});case"HandleOnAddUser":return Object(j.a)(Object(j.a)({},e),{},{onAddUser:!0,onEditUser:!1,alert:Object(j.a)(Object(j.a)({},e.alert),{},{show:!1})});case"HandleCancelCreate":return Object(j.a)(Object(j.a)({},e),{},{onAddUser:!1});case"BeforeCreateUser":return Object(j.a)(Object(j.a)({},e),{},{alert:{show:!0,type:"info",message:"Creating user. Please wait!"},actionButtonState:t.payload.actionButtonState});case"CreateUserSuccess":return Object(j.a)(Object(j.a)({},e),{},{users:t.payload.users,usersCount:t.payload.users.length,onAddUser:!1,onEditUser:!0,user:t.payload.user,alert:{show:!0,type:"success",message:"User successfully created!"},actionButtonState:t.payload.actionButtonState});case"CreateUserFailure":return Object(j.a)(Object(j.a)({},e),{},{alert:{show:!0,type:"danger",message:"Could not create user: ".concat(t.payload.error)},actionButtonState:t.payload.actionButtonState});case"BeforeDeleteUser":return Object(j.a)(Object(j.a)({},e),{},{alert:{show:!0,type:"info",message:"Deleting user. Please wait!"},actionButtonState:t.payload.actionButtonState});case"DeleteUserSuccess":return Object(j.a)(Object(j.a)({},e),{},{onViewUser:!1,users:t.payload.users,usersCount:t.payload.users.length,alert:{show:!0,type:"success",message:"User successfully deleted!"},actionButtonState:t.payload.actionButtonState});case"DeleteUserFailure":return Object(j.a)(Object(j.a)({},e),{},{onViewUser:!1,alert:{show:!0,type:"danger",message:"Could not delete user: ".concat(t.payload.error)},actionButtonState:t.payload.actionButtonState});case"BeforeUpdateUser":return Object(j.a)(Object(j.a)({},e),{},{alert:{show:!0,type:"info",message:"Updating user. Please wait!"},actionButtonState:t.payload.actionButtonState});case"HandleCancelUpdate":return Object(j.a)(Object(j.a)({},e),{},{onEditUser:!1});case"HandleEditUser":var a=e.users,s=a.findIndex((function(e){return e.id===t.payload.id})),n=a[s];return Object(j.a)(Object(j.a)({},e),{},{onEditUser:!0,user:n,onAddUser:!1,alert:Object(j.a)(Object(j.a)({},e.alert),{},{show:!1})});case"UpdateUserSuccess":return Object(j.a)(Object(j.a)({},e),{},{onViewUser:!1,users:t.payload.users,user:t.payload.user,onEditUser:!1,alert:{show:!0,type:"success",message:"User successfully updated!"},actionButtonState:t.payload.actionButtonState});case"UpdateUserFailure":return Object(j.a)(Object(j.a)({},e),{},{onViewUser:!1,alert:{show:!0,type:"danger",message:"Could not update user: ".concat(t.payload.error)},actionButtonState:t.payload.actionButtonState});case"HandleCloseAlert":return Object(j.a)(Object(j.a)({},e),{},{alert:{show:!1,message:"",type:""}});case"AddRoleToUserSuccess":var c=e.users,r=c.findIndex((function(e){return e.id===t.payload.user.id}));return c[r]=t.payload.user,Object(j.a)(Object(j.a)({},e),{},{users:c,user:t.payload.user,alert:{show:!0,type:"success",message:"User successfully added to user!"},actionButtonState:t.payload.actionButtonState});default:return e}},m=a(33),h=a(31),b=a.n(h),O=a(32),p=function(){var e=Object(O.a)(b.a.mark((function e(t){var a,s,n,c=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{},e.prev=1,e.next=4,fetch("/v1/users?findOptions=".concat(encodeURI(JSON.stringify(a))));case 4:if((s=e.sent).ok){e.next=7;break}throw new Error(s.statusText);case 7:return e.next=9,s.json();case 9:n=e.sent,t({type:"FetchDataSuccess",payload:{usersCount:n[1],users:n[0]}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t({type:"FetchDataFailure",payload:{error:e.t0}});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),x=a(40),f=function(){var e=Object(O.a)(b.a.mark((function e(t,a,s){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"BeforeUpdateUser",payload:{actionButtonState:"is-loading"}}),e.prev=1,e.next=4,fetch("/v1/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:c=a.findIndex((function(e){return e.id===t.id})),a[c]=t,s({type:"UpdateUserSuccess",payload:{user:t,users:a,actionButtonState:m.b}}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),s({type:"UpdateUserFailure",payload:{error:e.t0,actionButtonState:m.b}});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,a,s){return e.apply(this,arguments)}}(),v=function(){var e=Object(O.a)(b.a.mark((function e(t,a,s){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"BeforeDeleteUser",payload:{actionButtonState:"is-loading"}}),e.prev=1,e.next=4,fetch("/v1/users/".concat(t),{method:"DELETE"});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:c=a.findIndex((function(e){return e.id===t})),a.splice(c,1),s({type:"DeleteUserSuccess",payload:{id:t,users:a,actionButtonState:m.b}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),s({type:"DeleteUserFailure",payload:{error:e.t0,actionButtonState:m.b}});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,a,s){return e.apply(this,arguments)}}(),N=function(){var e=Object(O.a)(b.a.mark((function e(t,a,s){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"BeforeCreateUser",payload:{actionButtonState:"is-loading"}}),e.prev=1,e.next=4,fetch("/v1/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:c=e.sent,a.push(c),s({type:"CreateUserSuccess",payload:{user:c,users:a,actionButtonState:m.b}}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),s({type:"CreateUserFailure",payload:{error:e.t0,actionButtonState:m.b}});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,a,s){return e.apply(this,arguments)}}(),y=function(e){var t=e.user,a=Object(o.useContext)(W);return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:t.firstName}),Object(i.jsx)("td",{children:t.lastName}),Object(i.jsx)("td",{children:t.commonName}),Object(i.jsx)("td",{children:t.gender}),Object(i.jsx)("td",{children:t.primaryEmailAddress}),Object(i.jsx)("td",{children:t.landlord?"Yes":"No"}),Object(i.jsx)("td",{children:Object(i.jsxs)("div",{className:"buttons are-small",children:[Object(i.jsx)("button",{className:"button is-link",onClick:function(){a.dispatch({type:"HandleViewUser",payload:{user:t}})},children:"View Detail"}),Object(i.jsx)("button",{className:"button is-warning",onClick:function(){a.dispatch({type:"HandleEditUser",payload:{id:t.id}})},children:"Edit"}),Object(i.jsx)("button",{className:"button is-danger",onClick:function(){window.confirm("This action cannot be reversed! Are you sure you want to delete?")&&a.handleDeleteUser(t.id,a.currentUsers,a.dispatch)},children:"Delete"})]})})]})},g=function(){return Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Firstname"}),Object(i.jsx)("th",{children:"Lastname"}),Object(i.jsx)("th",{children:"Common name"}),Object(i.jsx)("th",{children:"Gender"}),Object(i.jsx)("th",{children:"Primary Email"}),Object(i.jsx)("th",{children:"Landlord?"}),Object(i.jsx)("th",{children:"Action"})]})})},T=function(e){var t;return t=e.users.map((function(e){return Object(i.jsx)(y,{user:e},e.id)})),Object(i.jsxs)("table",{className:"table is-striped is-narrow is-hoverable",children:[Object(i.jsx)("caption",{children:Object(i.jsx)("h3",{children:"Available users"})}),Object(i.jsx)(g,{}),Object(i.jsx)("tbody",{children:t})]})};!function(e){e.A="active",e.S="suspended",e.O="owing"}(s||(s={})),function(e){e.M="male",e.F="female"}(n||(n={})),function(e){e.A="admin",e.M="marketing",e.C="content-manager"}(c||(c={})),function(e){e.M="manager",e.T="tech-support"}(r||(r={}));var w=function(e){var t,a=Object(o.useState)(Object(j.a)({},{user:{phone:{office:[],mobile:[],home:[]},roles:[]}})),s=Object(l.a)(a,2),c=s[0],r=s[1],d=function(e){var t=c.user,a=e.target;t[a.name]=a.value,r(Object(j.a)(Object(j.a)({},c),{},{user:t}))};return Object(i.jsx)("form",{onSubmit:function(t){t.preventDefault(),e.handleCreateUser(c.user,e.currentUsers,e.dispatch)},children:Object(i.jsxs)("div",{className:"box",children:[Object(i.jsx)("div",{className:"columns is-mobile",children:Object(i.jsx)("h2",{children:"Add User"})}),Object(i.jsx)("div",{className:"columns is-mobile",children:Object(i.jsx)("div",{className:"column",children:Object(i.jsxs)("div",{className:"box",children:[Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Landlord?"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{type:"checkbox",name:"landlord",value:"",checked:c.user.landlord,onChange:function(){var e=!c.user.landlord;r(Object(j.a)(Object(j.a)({},c),{},{user:Object(j.a)(Object(j.a)({},c.user),{},{landlord:e})}))}})})]}),Object(i.jsxs)("div",{className:"field is-horizontal",children:[Object(i.jsx)("div",{className:"field-label is-normal",children:Object(i.jsx)("label",{className:"label",children:"Login information"})}),Object(i.jsxs)("div",{className:"field-body",children:[Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Primary Email Address"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{name:"primaryEmailAddress",className:"input",type:"email",placeholder:"Enter valid email here",maxLength:30,value:c.user.primaryEmailAddress,onChange:d,required:!0})}),Object(i.jsx)("p",{className:"help",children:"The email address should not be more than 30 letters"})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Password"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{name:"passwordHash",className:"input",type:"password",placeholder:"Enter password here",maxLength:128,value:c.user.passwordHash,onChange:d,required:!0})}),Object(i.jsx)("p",{className:"help",children:"The password should not be more than 128 letters"})]})]})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"First Name"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{name:"firstName",className:"input",type:"text",placeholder:"Enter first name here",maxLength:30,value:c.user.firstName,onChange:d,required:!0})}),Object(i.jsx)("p",{className:"help",children:"The first name should not be more than 30 letters"})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Last Name"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{name:"lastName",className:"input",type:"text",placeholder:"Enter last name here",maxLength:30,value:c.user.lastName,onChange:d,required:!0})}),Object(i.jsx)("p",{className:"help",children:"The last name should not be more than 30 letters"})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Middle Name"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{name:"middleName",className:"input",type:"text",placeholder:"Enter middle name here",maxLength:30,value:c.user.middleName,onChange:d})}),Object(i.jsx)("p",{className:"help",children:"Even though optional, it is advisable to enter middle name"})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Common Name"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{name:"commonName",className:"input",type:"text",placeholder:"Enter common name here",maxLength:20,value:c.user.commonName,onChange:d})}),Object(i.jsx)("p",{className:"help",children:"What is the user commonly called. The common name should not be more than 20 letters"})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Gender"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("div",{className:"select",children:Object(i.jsxs)("select",{name:"gender",value:c.user.gender,onChange:d,children:[Object(i.jsx)("option",{value:"notSelected",children:"Select Gender"}),Object(i.jsx)("option",{value:n.F,children:"Female"}),Object(i.jsx)("option",{value:n.M,children:"Male"})]})})}),Object(i.jsx)("p",{className:"help",children:"Select the Gender"})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Date of Birth"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{name:"dateOfBirth",id:"dateOfBirth",className:"input",type:"date",required:!0,pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}",max:(new Date).toLocaleString(),value:null===(t=c.user.dateOfBirth)||void 0===t?void 0:t.toLocaleString(),onChange:d})}),Object(i.jsx)("p",{className:"help",children:"The date of birth of the user. Pattern of entry is YYYY-MM-DD"})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Home Address"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("textarea",{name:"homeAddress",className:"input",rows:6,placeholder:"Enter home address here",maxLength:100,value:c.user.homeAddress,onChange:d})}),Object(i.jsx)("p",{className:"help",children:"The home address should not be more than 100 letters"})]}),Object(i.jsxs)("div",{className:"field is-horizontal",children:[Object(i.jsx)("div",{className:"field-label is-normal",children:Object(i.jsx)("label",{className:"label",children:"Phone numbers"})}),Object(i.jsxs)("div",{className:"field-body",children:[Object(i.jsxs)("div",{className:"control",children:[Object(i.jsx)("label",{className:"label",children:"Office"}),Object(i.jsx)("input",{name:"office-phone1",className:"input",type:"text",placeholder:"Enter office phone 1 here",maxLength:10,value:c.user.phone.office[0],onChange:function(e){var t=c.user,a=e.target;t.phone.office[0]=a.value,r(Object(j.a)(Object(j.a)({},c),{},{user:t}))}}),Object(i.jsx)("input",{name:"office-phone2",className:"input",type:"text",placeholder:"Enter office phone 2 here",maxLength:10,value:c.user.phone.office[1],onChange:function(e){var t=c.user,a=e.target;t.phone.office[1]=a.value,r(Object(j.a)(Object(j.a)({},c),{},{user:t}))},disabled:void 0===c.user.phone.office[0]||""===c.user.phone.office[0]})]}),Object(i.jsxs)("div",{className:"control",children:[Object(i.jsx)("label",{className:"label",children:"Mobile"}),Object(i.jsx)("input",{name:"mobile-phone1",className:"input",type:"text",placeholder:"Enter mobile phone 1 here",maxLength:10,value:c.user.phone.mobile[0],onChange:function(e){var t=c.user,a=e.target;t.phone.mobile[0]=a.value,r(Object(j.a)(Object(j.a)({},c),{},{user:t}))}}),Object(i.jsx)("input",{name:"mobile-phone2",className:"input",type:"text",placeholder:"Enter mobile phone 2 here",maxLength:10,value:c.user.phone.mobile[1],onChange:function(e){var t=c.user,a=e.target;t.phone.mobile[1]=a.value,r(Object(j.a)(Object(j.a)({},c),{},{user:t}))},disabled:void 0===c.user.phone.mobile[0]||""===c.user.phone.mobile[0]})]}),Object(i.jsxs)("div",{className:"control",children:[Object(i.jsx)("label",{className:"label",children:"Home"}),Object(i.jsx)("input",{name:"home-phone1",className:"input",type:"text",placeholder:"Enter home phone 1 here",maxLength:10,value:c.user.phone.home[0],onChange:function(e){var t=c.user,a=e.target;t.phone.home[0]=a.value,r(Object(j.a)(Object(j.a)({},c),{},{user:t}))}}),Object(i.jsx)("input",{name:"home-phone2",className:"input",type:"text",placeholder:"Enter home phone 2 here",maxLength:10,value:c.user.phone.home[1],onChange:function(e){var t=c.user,a=e.target;t.phone.home[1]=a.value,r(Object(j.a)(Object(j.a)({},c),{},{user:t}))},disabled:void 0===c.user.phone.home[0]||""===c.user.phone.home[0]})]})]})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Nationality"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{name:"nationality",className:"input",type:"text",placeholder:"Enter nationality here",maxLength:30,value:c.user.nationality,onChange:d})}),Object(i.jsx)("p",{className:"help",children:"The nationality should not be more than 30 letters"})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"State"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{name:"stateOfOrigin",className:"input",type:"text",placeholder:"Enter state here",maxLength:30,value:c.user.stateOfOrigin,onChange:d})}),Object(i.jsx)("p",{className:"help",children:"The state should not be more than 30 letters"})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Zip code"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{name:"zip",className:"input",type:"text",placeholder:"Enter zip code here",maxLength:6,value:c.user.zip,onChange:d})}),Object(i.jsx)("p",{className:"help",children:"The zip code should not be more than 6 letters"})]})]})})}),Object(i.jsx)("div",{className:"columns is-mobile",children:Object(i.jsxs)("div",{className:"field is-grouped",children:[Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("button",{className:"button is-link",children:"Submit"})}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("button",{className:"button is-link is-light",onClick:function(){e.dispatch({type:"HandleCancelCreate"})},children:"Cancel"})})]})})]})})},C=a(36);function S(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=Object(C.a)(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var s=0,n=function(){};return{s:n,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,r=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){l=!0,c=e},f:function(){try{r||null==a.return||a.return()}finally{if(l)throw c}}}}var U=a(39),B=function e(){Object(U.a)(this,e)};B.getAssignableRoles=function(){var e=Object(O.a)(b.a.mark((function e(t,a){var s,n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(m.a,"/roles"),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:if((s=e.sent).ok){e.next=6;break}throw new Error(s.statusText);case 6:return e.next=8,s.json();case 8:n=e.sent,c=[],n[0].map((function(e){t.user.landlord===e.landlord&&(-1===t.user.roles.findIndex((function(t){return t.id===e.id}))&&c.push(e))})),a(Object(j.a)(Object(j.a)({},t),{},{relations:Object(j.a)(Object(j.a)({},t.relations),{},{assignableRoles:c})})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}(),B.addRolesById=function(){var e=Object(O.a)(b.a.mark((function e(t,a,s,n){var c,r,l,i,o,d;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c="",r=S(a);try{for(r.s();!(l=r.n()).done;)i=l.value,c+="roleid=".concat(i,"&")}catch(u){r.e(u)}finally{r.f()}return e.prev=3,n(Object(j.a)(Object(j.a)({},s),{},{relations:Object(j.a)(Object(j.a)({},s.relations),{},{userRoles:Object(j.a)(Object(j.a)({},s.relations.userRoles),{},{submitButtonState:"is-loading"})})})),e.next=7,fetch("".concat(m.a,"/users/").concat(t,"/roles?").concat(c),{method:"PATCH",headers:{}});case 7:if((o=e.sent).ok){e.next=10;break}throw new Error(o.statusText);case 10:return e.next=12,o.json();case 12:d=e.sent,n(Object(j.a)(Object(j.a)({},s),{},{user:Object(j.a)(Object(j.a)({},s.user),{},{roles:d}),relations:Object(j.a)(Object(j.a)({},s.relations),{},{userRoles:Object(j.a)(Object(j.a)({},s.relations.userRoles),{},{submitButtonState:m.b})})})),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),n(Object(j.a)(Object(j.a)({},s),{},{relations:Object(j.a)(Object(j.a)({},s.relations),{},{userRoles:Object(j.a)(Object(j.a)({},s.relations.userRoles),{},{submitButtonState:m.b})})})),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t,a,s,n){return e.apply(this,arguments)}}(),B.removeRoleFromUser=function(){var e=Object(O.a)(b.a.mark((function e(t,a,s){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Object(j.a)(Object(j.a)({},a),{},{relations:Object(j.a)(Object(j.a)({},a.relations),{},{userRoles:Object(j.a)(Object(j.a)({},a.relations.userRoles),{},{deleteButtonState:"is-loading"})})})),e.next=4,fetch("".concat(m.a,"/users/").concat(a.user.id,"/roles/").concat(t),{method:"DELETE",headers:{}});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:c=e.sent,s(Object(j.a)(Object(j.a)({},a),{},{user:Object(j.a)(Object(j.a)({},a.user),{},{roles:c}),relations:Object(j.a)(Object(j.a)({},a.relations),{},{userRoles:Object(j.a)(Object(j.a)({},a.relations.userRoles),{},{deleteButtonState:"delete"})})})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),s(Object(j.a)(Object(j.a)({},a),{},{relations:Object(j.a)(Object(j.a)({},a.relations),{},{userRoles:Object(j.a)(Object(j.a)({},a.relations.userRoles),{},{deleteButtonState:"delete"})})})),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a,s){return e.apply(this,arguments)}}(),B.setAsPrimaryContactForATenantByTenantUniqueName=function(){var e=Object(O.a)(b.a.mark((function e(t,a,s){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Object(j.a)(Object(j.a)({},a),{},{relations:Object(j.a)(Object(j.a)({},a.relations),{},{primaryContactForWhichTenants:Object(j.a)(Object(j.a)({},a.relations.primaryContactForWhichTenants),{},{submitButtonState:"is-loading"})})})),e.next=4,fetch("".concat(m.a,"/users/").concat(a.user.id,"/primary-contact-for-by-unique-name/").concat(t),{method:"PATCH",headers:{}});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:c=e.sent,s(Object(j.a)(Object(j.a)({},a),{},{user:Object(j.a)(Object(j.a)({},a.user),{},{primaryContactForWhichTenants:c}),relations:Object(j.a)(Object(j.a)({},a.relations),{},{primaryContactForWhichTenants:Object(j.a)(Object(j.a)({},a.relations.primaryContactForWhichTenants),{},{submitButtonState:m.b})})})),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),s(Object(j.a)(Object(j.a)({},a),{},{relations:Object(j.a)(Object(j.a)({},a.relations),{},{primaryContactForWhichTenants:Object(j.a)(Object(j.a)({},a.relations.primaryContactForWhichTenants),{},{submitButtonState:m.b})})})),console.log(e.t0),alert(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a,s){return e.apply(this,arguments)}}(),B.removeAsPrimaryContactForATenantByTenantId=function(){var e=Object(O.a)(b.a.mark((function e(t,a,s){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Object(j.a)(Object(j.a)({},a),{},{relations:Object(j.a)(Object(j.a)({},a.relations),{},{primaryContactForWhichTenants:Object(j.a)(Object(j.a)({},a.relations.primaryContactForWhichTenants),{},{deleteButtonState:"is-loading"})})})),e.next=4,fetch("".concat(m.a,"/users/").concat(a.user.id,"/primary-contact-for/").concat(t),{method:"DELETE",headers:{}});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:c=e.sent,s(Object(j.a)(Object(j.a)({},a),{},{user:Object(j.a)(Object(j.a)({},a.user),{},{primaryContactForWhichTenants:c}),relations:Object(j.a)(Object(j.a)({},a.relations),{},{primaryContactForWhichTenants:Object(j.a)(Object(j.a)({},a.relations.primaryContactForWhichTenants),{},{deleteButtonState:"delete"})})})),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),s(Object(j.a)(Object(j.a)({},a),{},{relations:Object(j.a)(Object(j.a)({},a.relations),{},{primaryContactForWhichTenants:Object(j.a)(Object(j.a)({},a.relations.primaryContactForWhichTenants),{},{deleteButtonState:"delete"})})})),console.log(e.t0),alert(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a,s){return e.apply(this,arguments)}}(),B.setTenantTeamMembershipByTenantUniqueName=function(){var e=Object(O.a)(b.a.mark((function e(t,a,s,n){var c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(Object(j.a)(Object(j.a)({},s),{},{relations:Object(j.a)(Object(j.a)({},s.relations),{},{tenantTeamMemberships:Object(j.a)(Object(j.a)({},s.relations.tenantTeamMemberships),{},{submitButtonState:"is-loading"})})})),e.next=4,fetch("".concat(m.a,"/users/").concat(s.user.id,"/team-membership-by-uniqueName/").concat(t),{method:"PATCH",headers:{},body:JSON.stringify(a)});case 4:if((c=e.sent).ok){e.next=7;break}throw new Error(c.statusText);case 7:return e.next=9,c.json();case 9:r=e.sent,n(Object(j.a)(Object(j.a)({},s),{},{user:Object(j.a)(Object(j.a)({},s.user),{},{tenantTeamMemberships:r}),relations:Object(j.a)(Object(j.a)({},s.relations),{},{tenantTeamMemberships:Object(j.a)(Object(j.a)({},s.relations.tenantTeamMemberships),{},{submitButtonState:m.b})})})),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),n(Object(j.a)(Object(j.a)({},s),{},{relations:Object(j.a)(Object(j.a)({},s.relations),{},{tenantTeamMemberships:Object(j.a)(Object(j.a)({},s.relations.tenantTeamMemberships),{},{submitButtonState:m.b})})})),console.log(e.t0),alert(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a,s,n){return e.apply(this,arguments)}}(),B.deleteTenantTeamMemberShipById=function(){var e=Object(O.a)(b.a.mark((function e(t,a,s){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Object(j.a)(Object(j.a)({},a),{},{relations:Object(j.a)(Object(j.a)({},a.relations),{},{tenantTeamMemberships:Object(j.a)(Object(j.a)({},a.relations.tenantTeamMemberships),{},{deleteButtonState:"is-loading"})})})),e.next=4,fetch("".concat(m.a,"/users/").concat(a.user.id,"/team-membership/").concat(t),{method:"DELETE",headers:{}});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:c=e.sent,s(Object(j.a)(Object(j.a)({},a),{},{user:Object(j.a)(Object(j.a)({},a.user),{},{tenantTeamMemberships:c}),relations:Object(j.a)(Object(j.a)({},a.relations),{},{tenantTeamMemberships:Object(j.a)(Object(j.a)({},a.relations.tenantTeamMemberships),{},{deleteButtonState:"delete"})})})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),s(Object(j.a)(Object(j.a)({},a),{},{relations:Object(j.a)(Object(j.a)({},a.relations),{},{tenantTeamMemberships:Object(j.a)(Object(j.a)({},a.relations.tenantTeamMemberships),{},{deleteButtonState:"delete"})})})),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a,s){return e.apply(this,arguments)}}(),B.submitPhoto=function(){var e=Object(O.a)(b.a.mark((function e(t,a,s,n){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(Object(j.a)(Object(j.a)({},s),{},{relations:Object(j.a)(Object(j.a)({},s.relations),{},{photo:Object(j.a)(Object(j.a)({},s.relations.photo),{},{uploadButtonState:"is-loading"})})})),e.next=4,fetch("/v1/users/".concat(t,"/photo"),{method:"POST",body:a});case 4:if((c=e.sent).ok){e.next=7;break}throw new Error(c.statusText);case 7:n(Object(j.a)(Object(j.a)({},s),{},{relations:Object(j.a)(Object(j.a)({},s.relations),{},{photo:Object(j.a)(Object(j.a)({},s.relations.photo),{},{src:"".concat(s.relations.photo.src,"?&").concat(Date.now()),fileToUpload:"",uploadButtonState:""})})})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),n(Object(j.a)(Object(j.a)({},s),{},{relations:Object(j.a)(Object(j.a)({},s.relations),{},{photo:Object(j.a)(Object(j.a)({},s.relations.photo),{},{alert:{show:!0,type:"danger",message:"photo upload failed: ".concat(e.t0.message)}})})}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a,s,n){return e.apply(this,arguments)}}();var E=function(e){var t=e.role,a=e.state,s=e.setState;return Object(i.jsx)("div",{className:"columns",children:Object(i.jsxs)("div",{className:"column",children:[Object(i.jsx)("button",{className:a.relations.userRoles.deleteButtonState,onClick:function(){var e;window.confirm("This action cannot be reversed! Are you sure you want to delete?")&&(e=t.id,B.removeRoleFromUser(e,a,s))}}),t.name]})})},k=function(e){var t=e.tenant,a=e.state,s=e.setState;return Object(i.jsx)("div",{className:"columns",children:Object(i.jsxs)("div",{className:"column",children:[Object(i.jsx)("button",{className:a.relations.primaryContactForWhichTenants.deleteButtonState,onClick:function(){var e;window.confirm("This action cannot be reversed! Are you sure you want to delete?")&&(e=t.id,B.removeAsPrimaryContactForATenantByTenantId(e,a,s))}}),t.uniqueName]})})},A=function(e){var t=e.tenantTeam,a=e.state,s=e.setState;return Object(i.jsxs)("div",{className:"columns",children:[Object(i.jsxs)("div",{className:"column",children:[Object(i.jsx)("button",{className:a.relations.tenantTeamMemberships.deleteButtonState,onClick:function(){var e;window.confirm("This action cannot be reversed! Are you sure you want to delete?")&&(e=t.tenantUniqueId,B.deleteTenantTeamMemberShipById(e,a,s))}}),t.tenantUniqueName]}),Object(i.jsxs)("div",{className:"column",children:[Object(i.jsx)("div",{children:"Roles:"}),t.roles.map((function(e){return"".concat(e," ")}))]})]})},F=function(e){var t,a=e.user,s=e.handleUpdateUser,r=e.currentUsers,d=e.dispatch,u={user:{id:a.id,landlord:a.landlord,firstName:a.firstName,middleName:a.middleName,lastName:a.lastName,commonName:a.commonName,homeAddress:a.homeAddress,gender:a.gender,dateOfBirth:a.dateOfBirth,nationality:a.nationality,stateOfOrigin:a.stateOfOrigin,zip:a.zip,isActive:a.isActive,primaryEmailAddress:a.primaryEmailAddress,backupEmailAddress:a.backupEmailAddress,isPasswordChangeRequired:a.isPasswordChangeRequired,phone:a.phone||{mobile:[],office:[],home:[]},photo:a.photo,photoMimeType:a.photoMimeType,isPrimaryEmailAddressVerified:a.isPrimaryEmailAddressVerified,isBackupEmailAddressVerified:a.isBackupEmailAddressVerified,otpEnabled:a.otpEnabled,roles:a.roles,primaryContactForWhichTenants:a.primaryContactForWhichTenants,tenantTeamMemberships:a.tenantTeamMemberships,accountOfficerForWhichTenants:a.accountOfficerForWhichTenants},relations:{assignableRoles:[],tenants:[],photo:{fileToUpload:"",uploadButtonState:"",alert:{show:!1,type:void 0,message:""},src:"/v1/users/".concat(a.id,"/photo")},userRoles:{rolesToAdd:[],submitButtonState:m.b,deleteButtonState:"delete"},primaryContactForWhichTenants:{submitButtonState:m.b,deleteButtonState:"delete"},tenantTeamMemberships:{submitButtonState:m.b,deleteButtonState:"delete"}}},h=Object(o.useState)(Object(j.a)({},u)),p=Object(l.a)(h,2),x=p[0],f=p[1],v=function(e){var t=x.user,a=e.target;t[a.name]=a.value,f(Object(j.a)(Object(j.a)({},x),{},{user:t}))},N=function(){var e=Object(O.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),(a=new FormData).append("file",x.relations.photo.fileToUpload),B.submitPhoto(x.user.id,a,x,f);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(O.a)(b.a.mark((function e(t){var a,s,n,c,r,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=document.getElementById("add-roles"),s=[],n=a&&a.options,c=S(n);try{for(c.s();!(r=c.n()).done;)(l=r.value).selected&&s.push(l.value)}catch(i){c.e(i)}finally{c.f()}f(Object(j.a)(Object(j.a)({},x),{},{relations:Object(j.a)(Object(j.a)({},x.relations),{},{userRoles:Object(j.a)(Object(j.a)({},x.relations.userRoles),{},{rolesToAdd:s})})}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(O.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),B.addRolesById(a.id,x.relations.userRoles.rolesToAdd,x,f);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(O.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=t.target,f(Object(j.a)(Object(j.a)({},x),{},{relations:Object(j.a)(Object(j.a)({},x.relations),{},{primaryContactForWhichTenants:Object(j.a)(Object(j.a)({},x.relations.primaryContactForWhichTenants),{},{uniqueNameOfTenantToAdd:a.value})})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(O.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),B.setAsPrimaryContactForATenantByTenantUniqueName(x.relations.primaryContactForWhichTenants.uniqueNameOfTenantToAdd,x,f);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(O.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=t.target,f(Object(j.a)(Object(j.a)({},x),{},{relations:Object(j.a)(Object(j.a)({},x.relations),{},{tenantTeamMemberships:Object(j.a)(Object(j.a)({},x.relations.tenantTeamMemberships),{},{uniqueNameOfTenantToAdd:a.value})})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(O.a)(b.a.mark((function e(t){var a,s,n,c,r,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=document.getElementById("add-tenant-team-roles"),s=[],n=a&&a.options,c=S(n);try{for(c.s();!(r=c.n()).done;)(l=r.value).selected&&s.push(l.value)}catch(i){c.e(i)}finally{c.f()}f(Object(j.a)(Object(j.a)({},x),{},{relations:Object(j.a)(Object(j.a)({},x.relations),{},{tenantTeamMemberships:Object(j.a)(Object(j.a)({},x.relations.tenantTeamMemberships),{},{rolesToAdd:s})})}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(O.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),B.setTenantTeamMembershipByTenantUniqueName(x.relations.tenantTeamMemberships.uniqueNameOfTenantToAdd,x.relations.tenantTeamMemberships.rolesToAdd,x,f);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){B.getAssignableRoles(x,f)}),[x.user.roles,x.user.landlord]);return Object(i.jsxs)("div",{className:"columns is -mobile",children:[Object(i.jsx)("div",{className:"column is-two-thirds",children:Object(i.jsx)("form",{onSubmit:function(e){e.preventDefault(),s(x.user,r,d)},children:Object(i.jsxs)("div",{className:"box",children:[Object(i.jsx)("div",{className:"columns is-mobile",children:Object(i.jsx)("h2",{children:"Edit User"})}),Object(i.jsx)("div",{className:"columns is-mobile",children:Object(i.jsx)("div",{className:"column",children:Object(i.jsxs)("div",{className:"box",children:[Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Landlord?"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{type:"checkbox",name:"landlord",value:"",checked:x.user.landlord,onChange:function(){var e=!x.user.landlord;f(Object(j.a)(Object(j.a)({},x),{},{user:Object(j.a)(Object(j.a)({},x.user),{},{landlord:e})}))}})})]}),Object(i.jsx)("div",{className:"field is-horizontal",children:Object(i.jsx)("div",{className:"field-body",children:Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Primary Email Address"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{name:"primaryEmailAddress",className:"input",type:"email",placeholder:"Enter valid email here",maxLength:30,value:x.user.primaryEmailAddress,onChange:v,required:!0})}),Object(i.jsx)("p",{className:"help",children:"The email address should not be more than 30 letters"})]})})}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"First Name"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{name:"firstName",className:"input",type:"text",placeholder:"Enter first name here",maxLength:30,value:x.user.firstName,onChange:v,required:!0})}),Object(i.jsx)("p",{className:"help",children:"The first name should not be more than 30 letters"})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Last Name"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{name:"lastName",className:"input",type:"text",placeholder:"Enter last name here",maxLength:30,value:x.user.lastName,onChange:v,required:!0})}),Object(i.jsx)("p",{className:"help",children:"The last name should not be more than 30 letters"})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Middle Name"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{name:"middleName",className:"input",type:"text",placeholder:"Enter middle name here",maxLength:30,value:x.user.middleName,onChange:v})}),Object(i.jsx)("p",{className:"help",children:"Even though optional, it is advisable to enter middle name"})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Common Name"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{name:"commonName",className:"input",type:"text",placeholder:"Enter common name here",maxLength:20,value:x.user.commonName,onChange:v})}),Object(i.jsx)("p",{className:"help",children:"What is the user commonly called. The common name should not be more than 20 letters"})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Gender"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("div",{className:"select",children:Object(i.jsxs)("select",{name:"gender",value:x.user.gender,onChange:v,children:[Object(i.jsx)("option",{value:"notSelected",children:"Select Gender"}),Object(i.jsx)("option",{value:n.F,children:"Female"}),Object(i.jsx)("option",{value:n.M,children:"Male"})]})})}),Object(i.jsx)("p",{className:"help",children:"Select the Gender"})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsxs)("label",{className:"label",children:["Date of Birth: ",new Date(x.user.dateOfBirth).toLocaleDateString("en-GB")]}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{name:"dateOfBirth",id:"dateOfBirth",className:"input",type:"date",pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}",max:(new Date).toLocaleString(),value:null===(t=x.user.dateOfBirth)||void 0===t?void 0:t.toLocaleString(),onChange:v})}),Object(i.jsx)("p",{className:"help",children:"The date of birth of the user. Pattern of entry is YYYY-MM-DD"})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Home Address"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("textarea",{name:"homeAddress",className:"input",rows:6,placeholder:"Enter home address here",maxLength:100,value:x.user.homeAddress,onChange:v})}),Object(i.jsx)("p",{className:"help",children:"The home address should not be more than 100 letters"})]}),Object(i.jsxs)("div",{className:"field is-horizontal",children:[Object(i.jsx)("div",{className:"field-label is-normal",children:Object(i.jsx)("label",{className:"label",children:"Phone numbers"})}),Object(i.jsxs)("div",{className:"field-body",children:[Object(i.jsxs)("div",{className:"control",children:[Object(i.jsx)("label",{className:"label",children:"Office"}),Object(i.jsx)("input",{name:"office-phone1",className:"input",type:"text",placeholder:"Enter office phone 1 here",maxLength:10,value:x.user.phone.office[0],onChange:function(e){var t=x.user,a=e.target;t.phone.office[0]=a.value,f(Object(j.a)(Object(j.a)({},x),{},{user:t}))}}),Object(i.jsx)("input",{name:"office-phone2",className:"input",type:"text",placeholder:"Enter office phone 2 here",maxLength:10,value:x.user.phone.office[1],onChange:function(e){var t=x.user,a=e.target;t.phone.office[1]=a.value,f(Object(j.a)(Object(j.a)({},x),{},{user:t}))},disabled:void 0===x.user.phone.office[0]||""===x.user.phone.office[0]})]}),Object(i.jsxs)("div",{className:"control",children:[Object(i.jsx)("label",{className:"label",children:"Mobile"}),Object(i.jsx)("input",{name:"mobile-phone1",className:"input",type:"text",placeholder:"Enter mobile phone 1 here",maxLength:10,value:x.user.phone.mobile[0],onChange:function(e){var t=x.user,a=e.target;t.phone.mobile[0]=a.value,f(Object(j.a)(Object(j.a)({},x),{},{user:t}))}}),Object(i.jsx)("input",{name:"mobile-phone2",className:"input",type:"text",placeholder:"Enter mobile phone 2 here",maxLength:10,value:x.user.phone.mobile[1],onChange:function(e){var t=x.user,a=e.target;t.phone.mobile[1]=a.value,f(Object(j.a)(Object(j.a)({},x),{},{user:t}))},disabled:void 0===x.user.phone.mobile[0]||""===x.user.phone.mobile[0]})]}),Object(i.jsxs)("div",{className:"control",children:[Object(i.jsx)("label",{className:"label",children:"Home"}),Object(i.jsx)("input",{name:"home-phone1",className:"input",type:"text",placeholder:"Enter home phone 1 here",maxLength:10,value:x.user.phone.home[0],onChange:function(e){var t=x.user,a=e.target;t.phone.home[0]=a.value,f(Object(j.a)(Object(j.a)({},x),{},{user:t}))}}),Object(i.jsx)("input",{name:"home-phone2",className:"input",type:"text",placeholder:"Enter home phone 2 here",maxLength:10,value:x.user.phone.home[1],onChange:function(e){var t=x.user,a=e.target;t.phone.home[1]=a.value,f(Object(j.a)(Object(j.a)({},x),{},{user:t}))},disabled:void 0===x.user.phone.home[0]||""===x.user.phone.home[0]})]})]})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Nationality"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{name:"nationality",className:"input",type:"text",placeholder:"Enter nationality here",maxLength:30,value:x.user.nationality,onChange:v})}),Object(i.jsx)("p",{className:"help",children:"The nationality should not be more than 30 letters"})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"State"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{name:"stateOfOrigin",className:"input",type:"text",placeholder:"Enter state here",maxLength:30,value:x.user.stateOfOrigin,onChange:v})}),Object(i.jsx)("p",{className:"help",children:"The state should not be more than 30 letters"})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Zip code"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{name:"zip",className:"input",type:"text",placeholder:"Enter zip code here",maxLength:6,value:x.user.zip,onChange:v})}),Object(i.jsx)("p",{className:"help",children:"The zip code should not be more than 6 letters"})]})]})})}),Object(i.jsx)("div",{className:"columns is-mobile",children:Object(i.jsxs)("div",{className:"field is-grouped",children:[Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("button",{className:"button is-link",children:"Submit"})}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("button",{className:"button is-link is-light",onClick:function(){d({type:"HandleCancelUpdate"})},children:"Cancel"})})]})})]})})}),Object(i.jsxs)("div",{className:"column",children:[Object(i.jsx)("div",{className:"columns",children:Object(i.jsx)("div",{className:"column",children:Object(i.jsxs)("div",{className:"box",children:[Object(i.jsx)("h5",{children:"Photo"}),Object(i.jsx)("div",{className:"columns",children:Object(i.jsx)("div",{className:"column",children:Object(i.jsx)("img",{alt:"user",src:"".concat(x.relations.photo.src)})})}),Object(i.jsx)("form",{className:"columns",onSubmit:N,children:Object(i.jsx)("div",{className:"column",children:Object(i.jsxs)("div",{className:"box",children:[Object(i.jsx)("h6",{children:"Upload photo"}),Object(i.jsx)("div",{className:"field",children:Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",{type:"file",name:"file",onChange:function(e){f(Object(j.a)(Object(j.a)({},x),{},{relations:Object(j.a)(Object(j.a)({},x.relations),{},{photo:Object(j.a)(Object(j.a)({},x.relations.photo),{},{fileToUpload:e.target.files[0]})})}))},required:!0})})}),Object(i.jsx)("div",{className:"field",children:x.relations.photo.alert&&alert}),Object(i.jsx)("div",{className:"field control",children:Object(i.jsx)("button",{className:"button is-link is-small ".concat(x.relations.photo.uploadButtonState),type:"submit",children:"Submit"})})]})})})]})})}),Object(i.jsx)("div",{className:"columns",children:Object(i.jsx)("div",{className:"column",children:Object(i.jsxs)("div",{className:"box",children:[Object(i.jsx)("h5",{children:"Assigned Roles"}),Object(i.jsx)("div",{className:"columns",children:Object(i.jsx)("div",{className:"column",children:Object(i.jsx)("div",{className:"field",children:x.user.roles&&x.user.roles.length>0?x.user.roles.map((function(e){return Object(i.jsx)(E,{role:e,state:x,setState:f})})):Object(i.jsx)("div",{children:"No roles assigned to user yet"})})})}),x.relations.assignableRoles.length>0&&Object(i.jsx)("form",{className:"columns",onSubmit:g,children:Object(i.jsx)("div",{className:"column",children:Object(i.jsxs)("div",{className:"box",children:[Object(i.jsx)("h6",{children:"Add roles"}),Object(i.jsx)("div",{className:"field",children:Object(i.jsx)("select",{name:"roles",id:"add-roles",multiple:!0,className:"control",onChange:y,style:{minWidth:"50%"},children:x.relations.assignableRoles.map((function(e){return Object(i.jsx)("option",{value:e.id,children:e.name})}))})}),Object(i.jsx)("div",{className:"field control",children:Object(i.jsx)("button",{className:"button is-link is-small ".concat(x.relations.userRoles.submitButtonState),type:"submit",children:"Submit"})})]})})})]})})}),!x.user.landlord&&Object(i.jsx)("div",{className:"columns",children:Object(i.jsx)("div",{className:"column",children:Object(i.jsxs)("div",{className:"box",children:[Object(i.jsx)("h5",{className:"label",children:"Primary contact for"}),Object(i.jsx)("div",{className:"columns",children:Object(i.jsx)("div",{className:"column",children:Object(i.jsx)("div",{className:"field",children:x.user.primaryContactForWhichTenants&&x.user.primaryContactForWhichTenants.length>0?x.user.primaryContactForWhichTenants.map((function(e){return Object(i.jsx)(k,{tenant:e,state:x,setState:f})})):Object(i.jsx)("div",{children:"Not a primary contact for any tenant"})})})}),Object(i.jsx)("form",{className:"columns",onSubmit:w,children:Object(i.jsx)("div",{className:"column",children:Object(i.jsxs)("div",{className:"box",children:[Object(i.jsx)("h6",{className:"label",children:"Add tenant"}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Unique tenant name:"}),Object(i.jsx)("input",{className:"control",type:"text",name:"uniqueName",placeholder:"Unique name here",onChange:T})]}),Object(i.jsx)("div",{className:"field control",children:Object(i.jsx)("button",{className:"button is-link is-small ".concat(x.relations.primaryContactForWhichTenants.submitButtonState),type:"submit",children:"Submit"})})]})})})]})})}),!x.user.landlord&&Object(i.jsx)("div",{className:"columns",children:Object(i.jsx)("div",{className:"column",children:Object(i.jsxs)("div",{className:"box",children:[Object(i.jsx)("h5",{children:"Tenant Team Membership for"}),Object(i.jsx)("div",{className:"columns",children:Object(i.jsx)("div",{className:"column",children:Object(i.jsx)("div",{className:"field",children:x.user.tenantTeamMemberships&&x.user.tenantTeamMemberships.length>0?x.user.tenantTeamMemberships.map((function(e){return Object(i.jsx)(A,{tenantTeam:e,state:x,setState:f})})):Object(i.jsx)("div",{children:"Not a team member of any tenant"})})})}),Object(i.jsx)("form",{className:"columns",onSubmit:F,children:Object(i.jsx)("div",{className:"column",children:Object(i.jsxs)("div",{className:"box",children:[Object(i.jsx)("h6",{children:"Add tenant"}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Unique tenant name:"}),Object(i.jsx)("input",{className:"control",type:"text",name:"uniqueName",placeholder:"Unique name here",onChange:C})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Roles as a team member:"}),Object(i.jsx)("select",{name:"add-tenant-team-roles",id:"add-tenant-team-roles",multiple:!0,className:"control",style:{minWidth:"50%"},onChange:U,children:function(){for(var e=[],t=0,a=Object.values(c);t<a.length;t++){var s=a[t];e.push(Object(i.jsx)("option",{value:s,children:s}))}return e}()})]}),Object(i.jsx)("div",{className:"field control",children:Object(i.jsx)("button",{className:"button is-link is-small ".concat(x.relations.tenantTeamMemberships.submitButtonState),type:"submit",children:"Submit"})})]})})})]})})}),x.user.landlord&&Object(i.jsx)("div",{className:"columns",children:Object(i.jsx)("div",{className:"column",children:Object(i.jsx)("div",{className:"box",children:Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:"Account Officer For:"}),x.user.accountOfficerForWhichTenants&&x.user.accountOfficerForWhichTenants.length>0?x.user.accountOfficerForWhichTenants.entries:Object(i.jsx)("div",{children:"Not an account officer"}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("button",{onClick:function(){return alert("Yet to be implemented"),!1},className:"button is-link is-small",children:"Make an account officer"})})]})})})})]})]})},M=function(e){var t=e.role;return Object(i.jsx)("div",{className:"columns",children:Object(i.jsx)("div",{className:"column",children:t.name})})},L=function(e){var t=e.tenant;return Object(i.jsx)("div",{className:"columns",children:Object(i.jsx)("div",{className:"column",children:t.uniqueName})})},D=function(e){var t=e.tenantTeam;return Object(i.jsxs)("div",{className:"columns",children:[Object(i.jsx)("div",{className:"column",children:t.tenantUniqueName}),Object(i.jsxs)("div",{className:"column",children:[Object(i.jsx)("div",{children:"Roles:"}),t.roles.map((function(e){return"".concat(e," ")}))]})]})},R=function(e){var t=e.user,a=Object(o.useContext)(W);return Object(i.jsxs)("div",{className:"modal modal-full-screen modal-fx-fadeInScale is-active",children:[Object(i.jsx)("div",{className:"modal-background"}),Object(i.jsxs)("div",{className:"modal-content",children:[Object(i.jsxs)("header",{className:"modal-card-head",children:[Object(i.jsx)("p",{className:"modal-card-title",children:"Details of ".concat(t.firstName)}),Object(i.jsx)("button",{className:"delete","aria-label":"close",onClick:function(){a.dispatch({type:"HandleCloseViewUser"})}})]}),Object(i.jsx)("section",{className:"modal-card-body",children:Object(i.jsxs)("div",{className:"columns",children:[Object(i.jsxs)("div",{className:"column is-two-thirds",children:[Object(i.jsxs)("div",{className:"columns",children:[Object(i.jsx)("div",{className:"column is-two-fifths",children:"First name:"}),Object(i.jsx)("div",{className:"column",children:t.firstName})]}),Object(i.jsxs)("div",{className:"columns",children:[Object(i.jsx)("div",{className:"column is-two-fifths",children:"Last name:"}),Object(i.jsx)("div",{className:"column",children:t.lastName})]}),Object(i.jsxs)("div",{className:"columns",children:[Object(i.jsx)("div",{className:"column is-two-fifths",children:"Middle name:"}),Object(i.jsx)("div",{className:"column",children:t.middleName})]}),Object(i.jsxs)("div",{className:"columns",children:[Object(i.jsx)("div",{className:"column is-two-fifths",children:"Common name:"}),Object(i.jsx)("div",{className:"column",children:t.commonName})]}),Object(i.jsxs)("div",{className:"columns",children:[Object(i.jsx)("div",{className:"column is-two-fifths",children:"Gender:"}),Object(i.jsx)("div",{className:"column",children:t.gender})]}),Object(i.jsxs)("div",{className:"columns",children:[Object(i.jsx)("div",{className:"column is-two-fifths",children:"Home address:"}),Object(i.jsx)("div",{className:"column",children:t.homeAddress})]}),Object(i.jsxs)("div",{className:"columns",children:[Object(i.jsx)("div",{className:"column is-two-fifths",children:"Phone numbers:"}),Object(i.jsxs)("div",{className:"column",children:[Object(i.jsxs)("div",{className:"columns",children:[Object(i.jsx)("div",{className:"column",children:"Office:"}),Object(i.jsx)("div",{className:"column",children:t.phone?t.phone.office[0]:""}),Object(i.jsx)("div",{className:"column",children:t.phone?t.phone.office[1]:""})]}),Object(i.jsxs)("div",{className:"columns",children:[Object(i.jsx)("div",{className:"column",children:"Mobile:"}),Object(i.jsx)("div",{className:"column",children:t.phone?t.phone.mobile[0]:""}),Object(i.jsx)("div",{className:"column",children:t.phone?t.phone.mobile[1]:""})]}),Object(i.jsxs)("div",{className:"columns",children:[Object(i.jsx)("div",{className:"column",children:"Home:"}),Object(i.jsx)("div",{className:"column",children:t.phone?t.phone.home[0]:""}),Object(i.jsx)("div",{className:"column",children:t.phone?t.phone.home[1]:""})]})]})]}),Object(i.jsxs)("div",{className:"columns",children:[Object(i.jsx)("div",{className:"column is-two-fifths",children:"Nationality:"}),Object(i.jsx)("div",{className:"column",children:t.nationality})]}),Object(i.jsxs)("div",{className:"columns",children:[Object(i.jsx)("div",{className:"column is-two-fifths",children:"State:"}),Object(i.jsx)("div",{className:"column",children:t.state})]}),Object(i.jsxs)("div",{className:"columns",children:[Object(i.jsx)("div",{className:"column is-two-fifths",children:"Zip:"}),Object(i.jsx)("div",{className:"column",children:t.zip})]}),Object(i.jsxs)("div",{className:"columns",children:[Object(i.jsx)("div",{className:"column is-two-fifths",children:"Landlord user?:"}),Object(i.jsx)("div",{className:"column",children:t.landlord?"Yes":"No"})]})]}),Object(i.jsxs)("div",{className:"column",children:[Object(i.jsx)("div",{className:"columns",children:Object(i.jsx)("div",{className:"column",children:Object(i.jsxs)("div",{className:"box",children:[Object(i.jsx)("h5",{children:"Photo"}),Object(i.jsx)("div",{className:"columns",children:Object(i.jsx)("div",{className:"column",children:Object(i.jsx)("img",{alt:"user",src:"/v1/users/".concat(t.id,"/photo")})})})]})})}),Object(i.jsx)("div",{className:"columns",children:Object(i.jsx)("div",{className:"column",children:Object(i.jsxs)("div",{className:"box",children:[Object(i.jsx)("h5",{children:"Assigned Roles"}),Object(i.jsx)("div",{className:"columns",children:Object(i.jsx)("div",{className:"column",children:Object(i.jsx)("div",{className:"field",children:t.roles&&t.roles.length>0?t.roles.map((function(e){return Object(i.jsx)(M,{role:e})})):Object(i.jsx)("div",{children:"No roles assigned to user yet"})})})})]})})}),!t.landlord&&Object(i.jsx)("div",{className:"columns",children:Object(i.jsx)("div",{className:"column",children:Object(i.jsxs)("div",{className:"box",children:[Object(i.jsx)("h5",{className:"label",children:"Primary contact for"}),Object(i.jsx)("div",{className:"columns",children:Object(i.jsx)("div",{className:"column",children:Object(i.jsx)("div",{className:"field",children:t.primaryContactForWhichTenants&&t.primaryContactForWhichTenants.length>0?t.primaryContactForWhichTenants.map((function(e){return Object(i.jsx)(L,{tenant:e})})):Object(i.jsx)("div",{children:"Not a primary contact for any tenant"})})})})]})})}),!t.landlord&&Object(i.jsx)("div",{className:"columns",children:Object(i.jsx)("div",{className:"column",children:Object(i.jsxs)("div",{className:"box",children:[Object(i.jsx)("h5",{children:"Tenant Team Membership for"}),Object(i.jsx)("div",{className:"columns",children:Object(i.jsx)("div",{className:"column",children:Object(i.jsx)("div",{className:"field",children:t.tenantTeamMemberships&&t.tenantTeamMemberships.length>0?t.tenantTeamMemberships.map((function(e){return Object(i.jsx)(D,{tenantTeam:e})})):Object(i.jsx)("div",{children:"Not a team member of any tenant"})})})})]})})})]})]})}),Object(i.jsx)("footer",{className:"modal-card-foot",children:Object(i.jsxs)("div",{className:"buttons are-small",children:[Object(i.jsx)("button",{className:"button is-warning",onClick:function(){a.dispatch({type:"HandleEditUser",payload:{id:t.id}})},children:"Edit"}),Object(i.jsx)("button",{className:"button is-danger",onClick:function(){window.confirm("This action cannot be reversed! Are you sure you want to delete?")&&a.handleDeleteUser(t.id,a.dispatch)},children:"Delete"})]})})]})]})},W=d.a.createContext(null);t.default=function(e){var t={users:[],usersCount:0,user:null,onAddUser:!1,onViewUser:!1,onEditUser:!1,alert:{show:!1,message:"",type:""},actionButtonState:m.b},a=Object(o.useReducer)(u,t),s=Object(l.a)(a,2),n=s[0],c=s[1],r={relations:["roles","primaryContactForWhichTenants","tenantTeamMemberships"]};Object(o.useEffect)((function(){p(c,r)}),[]),Object(o.useEffect)((function(){window.scrollTo(0,0)}),[n.alert]);var d=Object(i.jsx)(x.a,{type:n.alert.type,message:n.alert.message,onClickHandler:function(){c({type:"HandleCloseAlert"})}});return n.onEditUser&&null!==n.user?Object(i.jsx)("div",{className:"container ",children:Object(i.jsxs)("div",{className:"content is-medium",children:[Object(i.jsx)("p",{children:n.alert.show&&d}),Object(i.jsx)("p",{children:Object(i.jsx)(F,{user:n.user,handleUpdateUser:f,currentUsers:n.users,dispatch:c})}),Object(i.jsx)("p",{children:Object(i.jsx)(W.Provider,{value:{dispatch:c,handleDeleteUser:v,currentUsers:n.users},children:Object(i.jsx)(T,{users:n.users})})})]})}):n.onAddUser?Object(i.jsx)("div",{className:"container ",children:Object(i.jsxs)("div",{className:"content is-medium",children:[Object(i.jsx)("p",{children:n.alert.show&&d}),Object(i.jsx)("p",{children:Object(i.jsx)(w,{handleCreateUser:N,currentUsers:n.users,dispatch:c})}),Object(i.jsx)("p",{children:Object(i.jsx)(W.Provider,{value:{dispatch:c,handleDeleteUser:v,currentUsers:n.users},children:Object(i.jsx)(T,{users:n.users})})})]})}):n.onViewUser&&null!=n.user?Object(i.jsx)("div",{className:"container ",children:Object(i.jsx)("div",{className:"content is-medium",children:Object(i.jsx)("p",{children:Object(i.jsx)(W.Provider,{value:{dispatch:c,handleDeleteUser:v,currentUsers:n.users},children:Object(i.jsx)(R,{user:n.user})})})})}):Object(i.jsx)("div",{className:"container ",children:Object(i.jsxs)("div",{className:"content is-medium",children:[Object(i.jsx)("p",{children:Object(i.jsx)("button",{className:"button is-outline",onClick:function(){c({type:"HandleOnAddUser"})},children:"+ Add User"})}),Object(i.jsx)("p",{children:n.alert.show&&d}),Object(i.jsx)("p",{children:Object(i.jsx)(W.Provider,{value:{dispatch:c,handleDeleteUser:v,currentUsers:n.users},children:Object(i.jsx)(T,{users:n.users})})})]})})}}}]);
//# sourceMappingURL=5.862ca057.chunk.js.map