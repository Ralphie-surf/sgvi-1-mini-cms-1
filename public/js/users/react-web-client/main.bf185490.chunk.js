(this["webpackJsonpuser-react-web-client"]=this["webpackJsonpuser-react-web-client"]||[]).push([[0],{25:function(e,t,a){"use strict";var s=a(0),n=(a(2),a(22));t.a=function(e){var t=e.message,a=e.type,c=e.onClickHandler;return Object(s.jsxs)(n.Notification,{color:a,onClick:c,children:[t,Object(s.jsx)(n.Button,{remove:!0})]})}},33:function(e,t,a){},4:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return r}));var s,n,c="is-info",r="/v1";!function(e){e.A="admin",e.M="marketing",e.C="content-manager"}(s||(s={})),function(e){e.M="manager",e.T="tech-support"}(n||(n={}))},40:function(e,t,a){"use strict";a.r(t);var s,n,c,r,l=a(0),i=a(2),o=a.n(i),d=a(21),j=a.n(d),u=(a(33),a(27)),m=a(15),b=a(7),h=a(12),O=a(1),p=function(e,t){switch(t.type){case"FetchDataSuccess":return Object(O.a)(Object(O.a)({},e),{},{users:t.payload.users,usersCount:t.payload.usersCount,actionButtonState:t.payload.actionButtonState});case"FetchDataFailure":return Object(O.a)(Object(O.a)({},e),{},{alert:{show:!0,type:"danger",message:"Could not load remote data: ".concat(t.payload.error)},actionButtonState:t.payload.actionButtonState});case"HandleViewUser":return Object(O.a)(Object(O.a)({},e),{},{onViewUser:!0,onAddUser:!1,onEditUser:!1,user:t.payload.user});case"HandleCloseViewUser":return Object(O.a)(Object(O.a)({},e),{},{onViewUser:!1,user:null});case"HandleOnAddUser":return Object(O.a)(Object(O.a)({},e),{},{onAddUser:!0,onEditUser:!1,alert:Object(O.a)(Object(O.a)({},e.alert),{},{show:!1})});case"HandleCancelCreate":return Object(O.a)(Object(O.a)({},e),{},{onAddUser:!1});case"BeforeCreateUser":return Object(O.a)(Object(O.a)({},e),{},{alert:{show:!0,type:"info",message:"Creating user. Please wait!"},actionButtonState:t.payload.actionButtonState});case"CreateUserSuccess":return Object(O.a)(Object(O.a)({},e),{},{users:t.payload.users,usersCount:t.payload.users.length,onAddUser:!1,onEditUser:!0,user:t.payload.user,alert:{show:!0,type:"success",message:"User successfully created!"},actionButtonState:t.payload.actionButtonState});case"CreateUserFailure":return Object(O.a)(Object(O.a)({},e),{},{alert:{show:!0,type:"danger",message:"Could not create user: ".concat(t.payload.error)},actionButtonState:t.payload.actionButtonState});case"BeforeDeleteUser":return Object(O.a)(Object(O.a)({},e),{},{alert:{show:!0,type:"info",message:"Deleting user. Please wait!"},actionButtonState:t.payload.actionButtonState});case"DeleteUserSuccess":return Object(O.a)(Object(O.a)({},e),{},{onViewUser:!1,users:t.payload.users,usersCount:t.payload.users.length,alert:{show:!0,type:"success",message:"User successfully deleted!"},actionButtonState:t.payload.actionButtonState});case"DeleteUserFailure":return Object(O.a)(Object(O.a)({},e),{},{onViewUser:!1,alert:{show:!0,type:"danger",message:"Could not delete user: ".concat(t.payload.error)},actionButtonState:t.payload.actionButtonState});case"BeforeUpdateUser":return Object(O.a)(Object(O.a)({},e),{},{alert:{show:!0,type:"info",message:"Updating user. Please wait!"},actionButtonState:t.payload.actionButtonState});case"HandleCancelUpdate":return Object(O.a)(Object(O.a)({},e),{},{onEditUser:!1});case"HandleEditUser":var a=e.users,s=a.findIndex((function(e){return e.id===t.payload.id})),n=a[s];return Object(O.a)(Object(O.a)({},e),{},{onEditUser:!0,user:n,onAddUser:!1,alert:Object(O.a)(Object(O.a)({},e.alert),{},{show:!1})});case"UpdateUserSuccess":return Object(O.a)(Object(O.a)({},e),{},{onViewUser:!1,users:t.payload.users,user:t.payload.user,onEditUser:!1,alert:{show:!0,type:"success",message:"User successfully updated!"},actionButtonState:t.payload.actionButtonState});case"UpdateUserFailure":return Object(O.a)(Object(O.a)({},e),{},{onViewUser:!1,alert:{show:!0,type:"danger",message:"Could not update user: ".concat(t.payload.error)},actionButtonState:t.payload.actionButtonState});case"HandleCloseAlert":return Object(O.a)(Object(O.a)({},e),{},{alert:{show:!1,message:"",type:""}});case"AddRoleToUserSuccess":var c=e.users,r=c.findIndex((function(e){return e.id===t.payload.user.id}));return c[r]=t.payload.user,Object(O.a)(Object(O.a)({},e),{},{users:c,user:t.payload.user,alert:{show:!0,type:"success",message:"User successfully added to user!"},actionButtonState:t.payload.actionButtonState});default:return e}},x=a(4),v=a(3),f=a.n(v),N=a(5),y=function(){var e=Object(N.a)(f.a.mark((function e(t){var a,s,n,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{},e.prev=1,e.next=4,fetch("/v1/users?findOptions=".concat(encodeURI(JSON.stringify(a))));case 4:if((s=e.sent).ok){e.next=7;break}throw new Error(s.statusText);case 7:return e.next=9,s.json();case 9:n=e.sent,t({type:"FetchDataSuccess",payload:{usersCount:n[1],users:n[0]}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t({type:"FetchDataFailure",payload:{error:e.t0}});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),g=a(25),T=function(){var e=Object(N.a)(f.a.mark((function e(t,a,s){var n,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"BeforeUpdateUser",payload:{actionButtonState:"is-loading"}}),e.prev=1,e.next=4,fetch("/v1/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:c=a.findIndex((function(e){return e.id===t.id})),a[c]=t,s({type:"UpdateUserSuccess",payload:{user:t,users:a,actionButtonState:x.b}}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),s({type:"UpdateUserFailure",payload:{error:e.t0,actionButtonState:x.b}});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,a,s){return e.apply(this,arguments)}}(),w=function(){var e=Object(N.a)(f.a.mark((function e(t,a,s){var n,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"BeforeDeleteUser",payload:{actionButtonState:"is-loading"}}),e.prev=1,e.next=4,fetch("/v1/users/".concat(t),{method:"DELETE"});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:c=a.findIndex((function(e){return e.id===t})),a.splice(c,1),s({type:"DeleteUserSuccess",payload:{id:t,users:a,actionButtonState:x.b}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),s({type:"DeleteUserFailure",payload:{error:e.t0,actionButtonState:x.b}});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,a,s){return e.apply(this,arguments)}}(),C=function(){var e=Object(N.a)(f.a.mark((function e(t,a,s){var n,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"BeforeCreateUser",payload:{actionButtonState:"is-loading"}}),e.prev=1,e.next=4,fetch("/v1/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:c=e.sent,a.push(c),s({type:"CreateUserSuccess",payload:{user:c,users:a,actionButtonState:x.b}}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),s({type:"CreateUserFailure",payload:{error:e.t0,actionButtonState:x.b}});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,a,s){return e.apply(this,arguments)}}(),S=function(e){var t=e.user,a=Object(i.useContext)(I);return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:t.firstName}),Object(l.jsx)("td",{children:t.lastName}),Object(l.jsx)("td",{children:t.commonName}),Object(l.jsx)("td",{children:t.gender}),Object(l.jsx)("td",{children:t.primaryEmailAddress}),Object(l.jsx)("td",{children:t.landlord?"Yes":"No"}),Object(l.jsx)("td",{children:Object(l.jsxs)("div",{className:"buttons are-small",children:[Object(l.jsx)("button",{className:"button is-link",onClick:function(){a.dispatch({type:"HandleViewUser",payload:{user:t}})},children:"View Detail"}),Object(l.jsx)("button",{className:"button is-warning",onClick:function(){a.dispatch({type:"HandleEditUser",payload:{id:t.id}})},children:"Edit"}),Object(l.jsx)("button",{className:"button is-danger",onClick:function(){window.confirm("This action cannot be reversed! Are you sure you want to delete?")&&a.handleDeleteUser(t.id,a.currentUsers,a.dispatch)},children:"Delete"})]})})]})},U=function(){return Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"Firstname"}),Object(l.jsx)("th",{children:"Lastname"}),Object(l.jsx)("th",{children:"Common name"}),Object(l.jsx)("th",{children:"Gender"}),Object(l.jsx)("th",{children:"Primary Email"}),Object(l.jsx)("th",{children:"Landlord?"}),Object(l.jsx)("th",{children:"Action"})]})})},B=function(e){var t;return t=e.users.map((function(e){return Object(l.jsx)(S,{user:e},e.id)})),Object(l.jsxs)("table",{className:"table is-striped is-narrow is-hoverable",children:[Object(l.jsx)("caption",{children:Object(l.jsx)("h3",{children:"Available users"})}),Object(l.jsx)(U,{}),Object(l.jsx)("tbody",{children:t})]})};!function(e){e.A="active",e.S="suspended",e.O="owing"}(s||(s={})),function(e){e.M="male",e.F="female"}(n||(n={})),function(e){e.A="admin",e.M="marketing",e.C="content-manager"}(c||(c={})),function(e){e.M="manager",e.T="tech-support"}(r||(r={}));var k=function(e){var t,a=Object(i.useState)(Object(O.a)({},{user:{phone:{office:[],mobile:[],home:[]},roles:[]}})),s=Object(h.a)(a,2),c=s[0],r=s[1],o=function(e){var t=c.user,a=e.target;t[a.name]=a.value,r(Object(O.a)(Object(O.a)({},c),{},{user:t}))};return Object(l.jsx)("form",{onSubmit:function(t){t.preventDefault(),e.handleCreateUser(c.user,e.currentUsers,e.dispatch)},children:Object(l.jsxs)("div",{className:"box",children:[Object(l.jsx)("div",{className:"columns is-mobile",children:Object(l.jsx)("h2",{children:"Add User"})}),Object(l.jsx)("div",{className:"columns is-mobile",children:Object(l.jsx)("div",{className:"column",children:Object(l.jsxs)("div",{className:"box",children:[Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Landlord?"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{type:"checkbox",name:"landlord",value:"",checked:c.user.landlord,onChange:function(){var e=!c.user.landlord;r(Object(O.a)(Object(O.a)({},c),{},{user:Object(O.a)(Object(O.a)({},c.user),{},{landlord:e})}))}})})]}),Object(l.jsxs)("div",{className:"field is-horizontal",children:[Object(l.jsx)("div",{className:"field-label is-normal",children:Object(l.jsx)("label",{className:"label",children:"Login information"})}),Object(l.jsxs)("div",{className:"field-body",children:[Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Primary Email Address"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{name:"primaryEmailAddress",className:"input",type:"email",placeholder:"Enter valid email here",maxLength:30,value:c.user.primaryEmailAddress,onChange:o,required:!0})}),Object(l.jsx)("p",{className:"help",children:"The email address should not be more than 30 letters"})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Password"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{name:"passwordHash",className:"input",type:"password",placeholder:"Enter password here",maxLength:128,value:c.user.passwordHash,onChange:o,required:!0})}),Object(l.jsx)("p",{className:"help",children:"The password should not be more than 128 letters"})]})]})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"First Name"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{name:"firstName",className:"input",type:"text",placeholder:"Enter first name here",maxLength:30,value:c.user.firstName,onChange:o,required:!0})}),Object(l.jsx)("p",{className:"help",children:"The first name should not be more than 30 letters"})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Last Name"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{name:"lastName",className:"input",type:"text",placeholder:"Enter last name here",maxLength:30,value:c.user.lastName,onChange:o,required:!0})}),Object(l.jsx)("p",{className:"help",children:"The last name should not be more than 30 letters"})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Middle Name"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{name:"middleName",className:"input",type:"text",placeholder:"Enter middle name here",maxLength:30,value:c.user.middleName,onChange:o})}),Object(l.jsx)("p",{className:"help",children:"Even though optional, it is advisable to enter middle name"})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Common Name"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{name:"commonName",className:"input",type:"text",placeholder:"Enter common name here",maxLength:20,value:c.user.commonName,onChange:o})}),Object(l.jsx)("p",{className:"help",children:"What is the user commonly called. The common name should not be more than 20 letters"})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Gender"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("div",{className:"select",children:Object(l.jsxs)("select",{name:"gender",value:c.user.gender,onChange:o,children:[Object(l.jsx)("option",{value:"notSelected",children:"Select Gender"}),Object(l.jsx)("option",{value:n.F,children:"Female"}),Object(l.jsx)("option",{value:n.M,children:"Male"})]})})}),Object(l.jsx)("p",{className:"help",children:"Select the Gender"})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Date of Birth"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{name:"dateOfBirth",id:"dateOfBirth",className:"input",type:"date",required:!0,pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}",max:(new Date).toLocaleString(),value:null===(t=c.user.dateOfBirth)||void 0===t?void 0:t.toLocaleString(),onChange:o})}),Object(l.jsx)("p",{className:"help",children:"The date of birth of the user. Pattern of entry is YYYY-MM-DD"})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Home Address"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("textarea",{name:"homeAddress",className:"input",rows:6,placeholder:"Enter home address here",maxLength:100,value:c.user.homeAddress,onChange:o})}),Object(l.jsx)("p",{className:"help",children:"The home address should not be more than 100 letters"})]}),Object(l.jsxs)("div",{className:"field is-horizontal",children:[Object(l.jsx)("div",{className:"field-label is-normal",children:Object(l.jsx)("label",{className:"label",children:"Phone numbers"})}),Object(l.jsxs)("div",{className:"field-body",children:[Object(l.jsxs)("div",{className:"control",children:[Object(l.jsx)("label",{className:"label",children:"Office"}),Object(l.jsx)("input",{name:"office-phone1",className:"input",type:"text",placeholder:"Enter office phone 1 here",maxLength:10,value:c.user.phone.office[0],onChange:function(e){var t=c.user,a=e.target;t.phone.office[0]=a.value,r(Object(O.a)(Object(O.a)({},c),{},{user:t}))}}),Object(l.jsx)("input",{name:"office-phone2",className:"input",type:"text",placeholder:"Enter office phone 2 here",maxLength:10,value:c.user.phone.office[1],onChange:function(e){var t=c.user,a=e.target;t.phone.office[1]=a.value,r(Object(O.a)(Object(O.a)({},c),{},{user:t}))},disabled:void 0===c.user.phone.office[0]||""===c.user.phone.office[0]})]}),Object(l.jsxs)("div",{className:"control",children:[Object(l.jsx)("label",{className:"label",children:"Mobile"}),Object(l.jsx)("input",{name:"mobile-phone1",className:"input",type:"text",placeholder:"Enter mobile phone 1 here",maxLength:10,value:c.user.phone.mobile[0],onChange:function(e){var t=c.user,a=e.target;t.phone.mobile[0]=a.value,r(Object(O.a)(Object(O.a)({},c),{},{user:t}))}}),Object(l.jsx)("input",{name:"mobile-phone2",className:"input",type:"text",placeholder:"Enter mobile phone 2 here",maxLength:10,value:c.user.phone.mobile[1],onChange:function(e){var t=c.user,a=e.target;t.phone.mobile[1]=a.value,r(Object(O.a)(Object(O.a)({},c),{},{user:t}))},disabled:void 0===c.user.phone.mobile[0]||""===c.user.phone.mobile[0]})]}),Object(l.jsxs)("div",{className:"control",children:[Object(l.jsx)("label",{className:"label",children:"Home"}),Object(l.jsx)("input",{name:"home-phone1",className:"input",type:"text",placeholder:"Enter home phone 1 here",maxLength:10,value:c.user.phone.home[0],onChange:function(e){var t=c.user,a=e.target;t.phone.home[0]=a.value,r(Object(O.a)(Object(O.a)({},c),{},{user:t}))}}),Object(l.jsx)("input",{name:"home-phone2",className:"input",type:"text",placeholder:"Enter home phone 2 here",maxLength:10,value:c.user.phone.home[1],onChange:function(e){var t=c.user,a=e.target;t.phone.home[1]=a.value,r(Object(O.a)(Object(O.a)({},c),{},{user:t}))},disabled:void 0===c.user.phone.home[0]||""===c.user.phone.home[0]})]})]})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Nationality"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{name:"nationality",className:"input",type:"text",placeholder:"Enter nationality here",maxLength:30,value:c.user.nationality,onChange:o})}),Object(l.jsx)("p",{className:"help",children:"The nationality should not be more than 30 letters"})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"State"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{name:"stateOfOrigin",className:"input",type:"text",placeholder:"Enter state here",maxLength:30,value:c.user.stateOfOrigin,onChange:o})}),Object(l.jsx)("p",{className:"help",children:"The state should not be more than 30 letters"})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Zip code"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{name:"zip",className:"input",type:"text",placeholder:"Enter zip code here",maxLength:6,value:c.user.zip,onChange:o})}),Object(l.jsx)("p",{className:"help",children:"The zip code should not be more than 6 letters"})]})]})})}),Object(l.jsx)("div",{className:"columns is-mobile",children:Object(l.jsxs)("div",{className:"field is-grouped",children:[Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("button",{className:"button is-link",children:"Submit"})}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("button",{className:"button is-link is-light",onClick:function(){e.dispatch({type:"HandleCancelCreate"})},children:"Cancel"})})]})})]})})},E=a(14),A=a(26),F=function e(){Object(A.a)(this,e)};F.getAssignableRoles=function(){var e=Object(N.a)(f.a.mark((function e(t,a){var s,n,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(x.a,"/roles"),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:if((s=e.sent).ok){e.next=6;break}throw new Error(s.statusText);case 6:return e.next=8,s.json();case 8:n=e.sent,c=[],n[0].map((function(e){t.user.landlord===e.landlord&&(-1===t.user.roles.findIndex((function(t){return t.id===e.id}))&&c.push(e))})),a(Object(O.a)(Object(O.a)({},t),{},{relations:Object(O.a)(Object(O.a)({},t.relations),{},{assignableRoles:c})})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}(),F.addRolesById=function(){var e=Object(N.a)(f.a.mark((function e(t,a,s,n){var c,r,l,i,o,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c="",r=Object(E.a)(a);try{for(r.s();!(l=r.n()).done;)i=l.value,c+="roleid=".concat(i,"&")}catch(j){r.e(j)}finally{r.f()}return e.prev=3,n(Object(O.a)(Object(O.a)({},s),{},{relations:Object(O.a)(Object(O.a)({},s.relations),{},{userRoles:Object(O.a)(Object(O.a)({},s.relations.userRoles),{},{submitButtonState:"is-loading"})})})),e.next=7,fetch("".concat(x.a,"/users/").concat(t,"/roles?").concat(c),{method:"PATCH",headers:{}});case 7:if((o=e.sent).ok){e.next=10;break}throw new Error(o.statusText);case 10:return e.next=12,o.json();case 12:d=e.sent,n(Object(O.a)(Object(O.a)({},s),{},{user:Object(O.a)(Object(O.a)({},s.user),{},{roles:d}),relations:Object(O.a)(Object(O.a)({},s.relations),{},{userRoles:Object(O.a)(Object(O.a)({},s.relations.userRoles),{},{submitButtonState:x.b})})})),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),n(Object(O.a)(Object(O.a)({},s),{},{relations:Object(O.a)(Object(O.a)({},s.relations),{},{userRoles:Object(O.a)(Object(O.a)({},s.relations.userRoles),{},{submitButtonState:x.b})})})),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t,a,s,n){return e.apply(this,arguments)}}(),F.removeRoleFromUser=function(){var e=Object(N.a)(f.a.mark((function e(t,a,s){var n,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Object(O.a)(Object(O.a)({},a),{},{relations:Object(O.a)(Object(O.a)({},a.relations),{},{userRoles:Object(O.a)(Object(O.a)({},a.relations.userRoles),{},{deleteButtonState:"is-loading"})})})),e.next=4,fetch("".concat(x.a,"/users/").concat(a.user.id,"/roles/").concat(t),{method:"DELETE",headers:{}});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:c=e.sent,s(Object(O.a)(Object(O.a)({},a),{},{user:Object(O.a)(Object(O.a)({},a.user),{},{roles:c}),relations:Object(O.a)(Object(O.a)({},a.relations),{},{userRoles:Object(O.a)(Object(O.a)({},a.relations.userRoles),{},{deleteButtonState:"delete"})})})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),s(Object(O.a)(Object(O.a)({},a),{},{relations:Object(O.a)(Object(O.a)({},a.relations),{},{userRoles:Object(O.a)(Object(O.a)({},a.relations.userRoles),{},{deleteButtonState:"delete"})})})),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a,s){return e.apply(this,arguments)}}(),F.setAsPrimaryContactForATenantByTenantUniqueName=function(){var e=Object(N.a)(f.a.mark((function e(t,a,s){var n,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Object(O.a)(Object(O.a)({},a),{},{relations:Object(O.a)(Object(O.a)({},a.relations),{},{primaryContactForWhichTenants:Object(O.a)(Object(O.a)({},a.relations.primaryContactForWhichTenants),{},{submitButtonState:"is-loading"})})})),e.next=4,fetch("".concat(x.a,"/users/").concat(a.user.id,"/primary-contact-for-by-unique-name/").concat(t),{method:"PATCH",headers:{}});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:c=e.sent,s(Object(O.a)(Object(O.a)({},a),{},{user:Object(O.a)(Object(O.a)({},a.user),{},{primaryContactForWhichTenants:c}),relations:Object(O.a)(Object(O.a)({},a.relations),{},{primaryContactForWhichTenants:Object(O.a)(Object(O.a)({},a.relations.primaryContactForWhichTenants),{},{submitButtonState:x.b})})})),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),s(Object(O.a)(Object(O.a)({},a),{},{relations:Object(O.a)(Object(O.a)({},a.relations),{},{primaryContactForWhichTenants:Object(O.a)(Object(O.a)({},a.relations.primaryContactForWhichTenants),{},{submitButtonState:x.b})})})),console.log(e.t0),alert(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a,s){return e.apply(this,arguments)}}(),F.removeAsPrimaryContactForATenantByTenantId=function(){var e=Object(N.a)(f.a.mark((function e(t,a,s){var n,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Object(O.a)(Object(O.a)({},a),{},{relations:Object(O.a)(Object(O.a)({},a.relations),{},{primaryContactForWhichTenants:Object(O.a)(Object(O.a)({},a.relations.primaryContactForWhichTenants),{},{deleteButtonState:"is-loading"})})})),e.next=4,fetch("".concat(x.a,"/users/").concat(a.user.id,"/primary-contact-for/").concat(t),{method:"DELETE",headers:{}});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:c=e.sent,s(Object(O.a)(Object(O.a)({},a),{},{user:Object(O.a)(Object(O.a)({},a.user),{},{primaryContactForWhichTenants:c}),relations:Object(O.a)(Object(O.a)({},a.relations),{},{primaryContactForWhichTenants:Object(O.a)(Object(O.a)({},a.relations.primaryContactForWhichTenants),{},{deleteButtonState:"delete"})})})),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),s(Object(O.a)(Object(O.a)({},a),{},{relations:Object(O.a)(Object(O.a)({},a.relations),{},{primaryContactForWhichTenants:Object(O.a)(Object(O.a)({},a.relations.primaryContactForWhichTenants),{},{deleteButtonState:"delete"})})})),console.log(e.t0),alert(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a,s){return e.apply(this,arguments)}}(),F.setTenantTeamMembershipByTenantUniqueName=function(){var e=Object(N.a)(f.a.mark((function e(t,a,s,n){var c,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(Object(O.a)(Object(O.a)({},s),{},{relations:Object(O.a)(Object(O.a)({},s.relations),{},{tenantTeamMemberships:Object(O.a)(Object(O.a)({},s.relations.tenantTeamMemberships),{},{submitButtonState:"is-loading"})})})),e.next=4,fetch("".concat(x.a,"/users/").concat(s.user.id,"/team-membership-by-uniqueName/").concat(t),{method:"PATCH",headers:{},body:JSON.stringify(a)});case 4:if((c=e.sent).ok){e.next=7;break}throw new Error(c.statusText);case 7:return e.next=9,c.json();case 9:r=e.sent,n(Object(O.a)(Object(O.a)({},s),{},{user:Object(O.a)(Object(O.a)({},s.user),{},{tenantTeamMemberships:r}),relations:Object(O.a)(Object(O.a)({},s.relations),{},{tenantTeamMemberships:Object(O.a)(Object(O.a)({},s.relations.tenantTeamMemberships),{},{submitButtonState:x.b})})})),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),n(Object(O.a)(Object(O.a)({},s),{},{relations:Object(O.a)(Object(O.a)({},s.relations),{},{tenantTeamMemberships:Object(O.a)(Object(O.a)({},s.relations.tenantTeamMemberships),{},{submitButtonState:x.b})})})),console.log(e.t0),alert(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a,s,n){return e.apply(this,arguments)}}(),F.deleteTenantTeamMemberShipById=function(){var e=Object(N.a)(f.a.mark((function e(t,a,s){var n,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Object(O.a)(Object(O.a)({},a),{},{relations:Object(O.a)(Object(O.a)({},a.relations),{},{tenantTeamMemberships:Object(O.a)(Object(O.a)({},a.relations.tenantTeamMemberships),{},{deleteButtonState:"is-loading"})})})),e.next=4,fetch("".concat(x.a,"/users/").concat(a.user.id,"/team-membership/").concat(t),{method:"DELETE",headers:{}});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:c=e.sent,s(Object(O.a)(Object(O.a)({},a),{},{user:Object(O.a)(Object(O.a)({},a.user),{},{tenantTeamMemberships:c}),relations:Object(O.a)(Object(O.a)({},a.relations),{},{tenantTeamMemberships:Object(O.a)(Object(O.a)({},a.relations.tenantTeamMemberships),{},{deleteButtonState:"delete"})})})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),s(Object(O.a)(Object(O.a)({},a),{},{relations:Object(O.a)(Object(O.a)({},a.relations),{},{tenantTeamMemberships:Object(O.a)(Object(O.a)({},a.relations.tenantTeamMemberships),{},{deleteButtonState:"delete"})})})),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a,s){return e.apply(this,arguments)}}(),F.submitPhoto=function(){var e=Object(N.a)(f.a.mark((function e(t,a,s,n){var c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(Object(O.a)(Object(O.a)({},s),{},{relations:Object(O.a)(Object(O.a)({},s.relations),{},{photo:Object(O.a)(Object(O.a)({},s.relations.photo),{},{uploadButtonState:"is-loading"})})})),e.next=4,fetch("/v1/users/".concat(t,"/photo"),{method:"POST",body:a});case 4:if((c=e.sent).ok){e.next=7;break}throw new Error(c.statusText);case 7:n(Object(O.a)(Object(O.a)({},s),{},{relations:Object(O.a)(Object(O.a)({},s.relations),{},{photo:Object(O.a)(Object(O.a)({},s.relations.photo),{},{src:"".concat(s.relations.photo.src,"?&").concat(Date.now()),fileToUpload:"",uploadButtonState:""})})})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),n(Object(O.a)(Object(O.a)({},s),{},{relations:Object(O.a)(Object(O.a)({},s.relations),{},{photo:Object(O.a)(Object(O.a)({},s.relations.photo),{},{alert:{show:!0,type:"danger",message:"photo upload failed: ".concat(e.t0.message)}})})}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a,s,n){return e.apply(this,arguments)}}();var M=function(e){var t=e.role,a=e.state,s=e.setState;return Object(l.jsx)("div",{className:"columns",children:Object(l.jsxs)("div",{className:"column",children:[Object(l.jsx)("button",{className:a.relations.userRoles.deleteButtonState,onClick:function(){var e;window.confirm("This action cannot be reversed! Are you sure you want to delete?")&&(e=t.id,F.removeRoleFromUser(e,a,s))}}),t.name]})})},L=function(e){var t=e.tenant,a=e.state,s=e.setState;return Object(l.jsx)("div",{className:"columns",children:Object(l.jsxs)("div",{className:"column",children:[Object(l.jsx)("button",{className:a.relations.primaryContactForWhichTenants.deleteButtonState,onClick:function(){var e;window.confirm("This action cannot be reversed! Are you sure you want to delete?")&&(e=t.id,F.removeAsPrimaryContactForATenantByTenantId(e,a,s))}}),t.uniqueName]})})},D=function(e){var t=e.tenantTeam,a=e.state,s=e.setState;return Object(l.jsxs)("div",{className:"columns",children:[Object(l.jsxs)("div",{className:"column",children:[Object(l.jsx)("button",{className:a.relations.tenantTeamMemberships.deleteButtonState,onClick:function(){var e;window.confirm("This action cannot be reversed! Are you sure you want to delete?")&&(e=t.tenantUniqueId,F.deleteTenantTeamMemberShipById(e,a,s))}}),t.tenantUniqueName]}),Object(l.jsxs)("div",{className:"column",children:[Object(l.jsx)("div",{children:"Roles:"}),t.roles.map((function(e){return"".concat(e," ")}))]})]})},P=function(e){var t,a=e.user,s=e.handleUpdateUser,r=e.currentUsers,o=e.dispatch,d={user:{id:a.id,landlord:a.landlord,firstName:a.firstName,middleName:a.middleName,lastName:a.lastName,commonName:a.commonName,homeAddress:a.homeAddress,gender:a.gender,dateOfBirth:a.dateOfBirth,nationality:a.nationality,stateOfOrigin:a.stateOfOrigin,zip:a.zip,isActive:a.isActive,primaryEmailAddress:a.primaryEmailAddress,backupEmailAddress:a.backupEmailAddress,isPasswordChangeRequired:a.isPasswordChangeRequired,phone:a.phone||{mobile:[],office:[],home:[]},photo:a.photo,photoMimeType:a.photoMimeType,isPrimaryEmailAddressVerified:a.isPrimaryEmailAddressVerified,isBackupEmailAddressVerified:a.isBackupEmailAddressVerified,otpEnabled:a.otpEnabled,roles:a.roles,primaryContactForWhichTenants:a.primaryContactForWhichTenants,tenantTeamMemberships:a.tenantTeamMemberships,accountOfficerForWhichTenants:a.accountOfficerForWhichTenants},relations:{assignableRoles:[],tenants:[],photo:{fileToUpload:"",uploadButtonState:"",alert:{show:!1,type:void 0,message:""},src:"/v1/users/".concat(a.id,"/photo")},userRoles:{rolesToAdd:[],submitButtonState:x.b,deleteButtonState:"delete"},primaryContactForWhichTenants:{submitButtonState:x.b,deleteButtonState:"delete"},tenantTeamMemberships:{submitButtonState:x.b,deleteButtonState:"delete"}}},j=Object(i.useState)(Object(O.a)({},d)),u=Object(h.a)(j,2),m=u[0],b=u[1],p=function(e){var t=m.user,a=e.target;t[a.name]=a.value,b(Object(O.a)(Object(O.a)({},m),{},{user:t}))},v=function(){var e=Object(N.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),(a=new FormData).append("file",m.relations.photo.fileToUpload),F.submitPhoto(m.user.id,a,m,b);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(N.a)(f.a.mark((function e(t){var a,s,n,c,r,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=document.getElementById("add-roles"),s=[],n=a&&a.options,c=Object(E.a)(n);try{for(c.s();!(r=c.n()).done;)(l=r.value).selected&&s.push(l.value)}catch(i){c.e(i)}finally{c.f()}b(Object(O.a)(Object(O.a)({},m),{},{relations:Object(O.a)(Object(O.a)({},m.relations),{},{userRoles:Object(O.a)(Object(O.a)({},m.relations.userRoles),{},{rolesToAdd:s})})}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(N.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),F.addRolesById(a.id,m.relations.userRoles.rolesToAdd,m,b);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(N.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=t.target,b(Object(O.a)(Object(O.a)({},m),{},{relations:Object(O.a)(Object(O.a)({},m.relations),{},{primaryContactForWhichTenants:Object(O.a)(Object(O.a)({},m.relations.primaryContactForWhichTenants),{},{uniqueNameOfTenantToAdd:a.value})})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(N.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),F.setAsPrimaryContactForATenantByTenantUniqueName(m.relations.primaryContactForWhichTenants.uniqueNameOfTenantToAdd,m,b);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(N.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=t.target,b(Object(O.a)(Object(O.a)({},m),{},{relations:Object(O.a)(Object(O.a)({},m.relations),{},{tenantTeamMemberships:Object(O.a)(Object(O.a)({},m.relations.tenantTeamMemberships),{},{uniqueNameOfTenantToAdd:a.value})})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(N.a)(f.a.mark((function e(t){var a,s,n,c,r,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=document.getElementById("add-tenant-team-roles"),s=[],n=a&&a.options,c=Object(E.a)(n);try{for(c.s();!(r=c.n()).done;)(l=r.value).selected&&s.push(l.value)}catch(i){c.e(i)}finally{c.f()}b(Object(O.a)(Object(O.a)({},m),{},{relations:Object(O.a)(Object(O.a)({},m.relations),{},{tenantTeamMemberships:Object(O.a)(Object(O.a)({},m.relations.tenantTeamMemberships),{},{rolesToAdd:s})})}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(N.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),F.setTenantTeamMembershipByTenantUniqueName(m.relations.tenantTeamMemberships.uniqueNameOfTenantToAdd,m.relations.tenantTeamMemberships.rolesToAdd,m,b);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){F.getAssignableRoles(m,b)}),[m.user.roles,m.user.landlord]);return Object(l.jsxs)("div",{className:"columns is -mobile",children:[Object(l.jsx)("div",{className:"column is-two-thirds",children:Object(l.jsx)("form",{onSubmit:function(e){e.preventDefault(),s(m.user,r,o)},children:Object(l.jsxs)("div",{className:"box",children:[Object(l.jsx)("div",{className:"columns is-mobile",children:Object(l.jsx)("h2",{children:"Edit User"})}),Object(l.jsx)("div",{className:"columns is-mobile",children:Object(l.jsx)("div",{className:"column",children:Object(l.jsxs)("div",{className:"box",children:[Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Landlord?"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{type:"checkbox",name:"landlord",value:"",checked:m.user.landlord,onChange:function(){var e=!m.user.landlord;b(Object(O.a)(Object(O.a)({},m),{},{user:Object(O.a)(Object(O.a)({},m.user),{},{landlord:e})}))}})})]}),Object(l.jsx)("div",{className:"field is-horizontal",children:Object(l.jsx)("div",{className:"field-body",children:Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Primary Email Address"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{name:"primaryEmailAddress",className:"input",type:"email",placeholder:"Enter valid email here",maxLength:30,value:m.user.primaryEmailAddress,onChange:p,required:!0})}),Object(l.jsx)("p",{className:"help",children:"The email address should not be more than 30 letters"})]})})}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"First Name"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{name:"firstName",className:"input",type:"text",placeholder:"Enter first name here",maxLength:30,value:m.user.firstName,onChange:p,required:!0})}),Object(l.jsx)("p",{className:"help",children:"The first name should not be more than 30 letters"})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Last Name"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{name:"lastName",className:"input",type:"text",placeholder:"Enter last name here",maxLength:30,value:m.user.lastName,onChange:p,required:!0})}),Object(l.jsx)("p",{className:"help",children:"The last name should not be more than 30 letters"})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Middle Name"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{name:"middleName",className:"input",type:"text",placeholder:"Enter middle name here",maxLength:30,value:m.user.middleName,onChange:p})}),Object(l.jsx)("p",{className:"help",children:"Even though optional, it is advisable to enter middle name"})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Common Name"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{name:"commonName",className:"input",type:"text",placeholder:"Enter common name here",maxLength:20,value:m.user.commonName,onChange:p})}),Object(l.jsx)("p",{className:"help",children:"What is the user commonly called. The common name should not be more than 20 letters"})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Gender"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("div",{className:"select",children:Object(l.jsxs)("select",{name:"gender",value:m.user.gender,onChange:p,children:[Object(l.jsx)("option",{value:"notSelected",children:"Select Gender"}),Object(l.jsx)("option",{value:n.F,children:"Female"}),Object(l.jsx)("option",{value:n.M,children:"Male"})]})})}),Object(l.jsx)("p",{className:"help",children:"Select the Gender"})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsxs)("label",{className:"label",children:["Date of Birth: ",new Date(m.user.dateOfBirth).toLocaleDateString("en-GB")]}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{name:"dateOfBirth",id:"dateOfBirth",className:"input",type:"date",pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}",max:(new Date).toLocaleString(),value:null===(t=m.user.dateOfBirth)||void 0===t?void 0:t.toLocaleString(),onChange:p})}),Object(l.jsx)("p",{className:"help",children:"The date of birth of the user. Pattern of entry is YYYY-MM-DD"})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Home Address"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("textarea",{name:"homeAddress",className:"input",rows:6,placeholder:"Enter home address here",maxLength:100,value:m.user.homeAddress,onChange:p})}),Object(l.jsx)("p",{className:"help",children:"The home address should not be more than 100 letters"})]}),Object(l.jsxs)("div",{className:"field is-horizontal",children:[Object(l.jsx)("div",{className:"field-label is-normal",children:Object(l.jsx)("label",{className:"label",children:"Phone numbers"})}),Object(l.jsxs)("div",{className:"field-body",children:[Object(l.jsxs)("div",{className:"control",children:[Object(l.jsx)("label",{className:"label",children:"Office"}),Object(l.jsx)("input",{name:"office-phone1",className:"input",type:"text",placeholder:"Enter office phone 1 here",maxLength:10,value:m.user.phone.office[0],onChange:function(e){var t=m.user,a=e.target;t.phone.office[0]=a.value,b(Object(O.a)(Object(O.a)({},m),{},{user:t}))}}),Object(l.jsx)("input",{name:"office-phone2",className:"input",type:"text",placeholder:"Enter office phone 2 here",maxLength:10,value:m.user.phone.office[1],onChange:function(e){var t=m.user,a=e.target;t.phone.office[1]=a.value,b(Object(O.a)(Object(O.a)({},m),{},{user:t}))},disabled:void 0===m.user.phone.office[0]||""===m.user.phone.office[0]})]}),Object(l.jsxs)("div",{className:"control",children:[Object(l.jsx)("label",{className:"label",children:"Mobile"}),Object(l.jsx)("input",{name:"mobile-phone1",className:"input",type:"text",placeholder:"Enter mobile phone 1 here",maxLength:10,value:m.user.phone.mobile[0],onChange:function(e){var t=m.user,a=e.target;t.phone.mobile[0]=a.value,b(Object(O.a)(Object(O.a)({},m),{},{user:t}))}}),Object(l.jsx)("input",{name:"mobile-phone2",className:"input",type:"text",placeholder:"Enter mobile phone 2 here",maxLength:10,value:m.user.phone.mobile[1],onChange:function(e){var t=m.user,a=e.target;t.phone.mobile[1]=a.value,b(Object(O.a)(Object(O.a)({},m),{},{user:t}))},disabled:void 0===m.user.phone.mobile[0]||""===m.user.phone.mobile[0]})]}),Object(l.jsxs)("div",{className:"control",children:[Object(l.jsx)("label",{className:"label",children:"Home"}),Object(l.jsx)("input",{name:"home-phone1",className:"input",type:"text",placeholder:"Enter home phone 1 here",maxLength:10,value:m.user.phone.home[0],onChange:function(e){var t=m.user,a=e.target;t.phone.home[0]=a.value,b(Object(O.a)(Object(O.a)({},m),{},{user:t}))}}),Object(l.jsx)("input",{name:"home-phone2",className:"input",type:"text",placeholder:"Enter home phone 2 here",maxLength:10,value:m.user.phone.home[1],onChange:function(e){var t=m.user,a=e.target;t.phone.home[1]=a.value,b(Object(O.a)(Object(O.a)({},m),{},{user:t}))},disabled:void 0===m.user.phone.home[0]||""===m.user.phone.home[0]})]})]})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Nationality"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{name:"nationality",className:"input",type:"text",placeholder:"Enter nationality here",maxLength:30,value:m.user.nationality,onChange:p})}),Object(l.jsx)("p",{className:"help",children:"The nationality should not be more than 30 letters"})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"State"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{name:"stateOfOrigin",className:"input",type:"text",placeholder:"Enter state here",maxLength:30,value:m.user.stateOfOrigin,onChange:p})}),Object(l.jsx)("p",{className:"help",children:"The state should not be more than 30 letters"})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Zip code"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{name:"zip",className:"input",type:"text",placeholder:"Enter zip code here",maxLength:6,value:m.user.zip,onChange:p})}),Object(l.jsx)("p",{className:"help",children:"The zip code should not be more than 6 letters"})]})]})})}),Object(l.jsx)("div",{className:"columns is-mobile",children:Object(l.jsxs)("div",{className:"field is-grouped",children:[Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("button",{className:"button is-link",children:"Submit"})}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("button",{className:"button is-link is-light",onClick:function(){o({type:"HandleCancelUpdate"})},children:"Cancel"})})]})})]})})}),Object(l.jsxs)("div",{className:"column",children:[Object(l.jsx)("div",{className:"columns",children:Object(l.jsx)("div",{className:"column",children:Object(l.jsxs)("div",{className:"box",children:[Object(l.jsx)("h5",{children:"Photo"}),Object(l.jsx)("div",{className:"columns",children:Object(l.jsx)("div",{className:"column",children:Object(l.jsx)("img",{alt:"user",src:"".concat(m.relations.photo.src)})})}),Object(l.jsx)("form",{className:"columns",onSubmit:v,children:Object(l.jsx)("div",{className:"column",children:Object(l.jsxs)("div",{className:"box",children:[Object(l.jsx)("h6",{children:"Upload photo"}),Object(l.jsx)("div",{className:"field",children:Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{type:"file",name:"file",onChange:function(e){b(Object(O.a)(Object(O.a)({},m),{},{relations:Object(O.a)(Object(O.a)({},m.relations),{},{photo:Object(O.a)(Object(O.a)({},m.relations.photo),{},{fileToUpload:e.target.files[0]})})}))},required:!0})})}),Object(l.jsx)("div",{className:"field",children:m.relations.photo.alert&&alert}),Object(l.jsx)("div",{className:"field control",children:Object(l.jsx)("button",{className:"button is-link is-small ".concat(m.relations.photo.uploadButtonState),type:"submit",children:"Submit"})})]})})})]})})}),Object(l.jsx)("div",{className:"columns",children:Object(l.jsx)("div",{className:"column",children:Object(l.jsxs)("div",{className:"box",children:[Object(l.jsx)("h5",{children:"Assigned Roles"}),Object(l.jsx)("div",{className:"columns",children:Object(l.jsx)("div",{className:"column",children:Object(l.jsx)("div",{className:"field",children:m.user.roles&&m.user.roles.length>0?m.user.roles.map((function(e){return Object(l.jsx)(M,{role:e,state:m,setState:b})})):Object(l.jsx)("div",{children:"No roles assigned to user yet"})})})}),m.relations.assignableRoles.length>0&&Object(l.jsx)("form",{className:"columns",onSubmit:g,children:Object(l.jsx)("div",{className:"column",children:Object(l.jsxs)("div",{className:"box",children:[Object(l.jsx)("h6",{children:"Add roles"}),Object(l.jsx)("div",{className:"field",children:Object(l.jsx)("select",{name:"roles",id:"add-roles",multiple:!0,className:"control",onChange:y,style:{minWidth:"50%"},children:m.relations.assignableRoles.map((function(e){return Object(l.jsx)("option",{value:e.id,children:e.name})}))})}),Object(l.jsx)("div",{className:"field control",children:Object(l.jsx)("button",{className:"button is-link is-small ".concat(m.relations.userRoles.submitButtonState),type:"submit",children:"Submit"})})]})})})]})})}),!m.user.landlord&&Object(l.jsx)("div",{className:"columns",children:Object(l.jsx)("div",{className:"column",children:Object(l.jsxs)("div",{className:"box",children:[Object(l.jsx)("h5",{className:"label",children:"Primary contact for"}),Object(l.jsx)("div",{className:"columns",children:Object(l.jsx)("div",{className:"column",children:Object(l.jsx)("div",{className:"field",children:m.user.primaryContactForWhichTenants&&m.user.primaryContactForWhichTenants.length>0?m.user.primaryContactForWhichTenants.map((function(e){return Object(l.jsx)(L,{tenant:e,state:m,setState:b})})):Object(l.jsx)("div",{children:"Not a primary contact for any tenant"})})})}),Object(l.jsx)("form",{className:"columns",onSubmit:w,children:Object(l.jsx)("div",{className:"column",children:Object(l.jsxs)("div",{className:"box",children:[Object(l.jsx)("h6",{className:"label",children:"Add tenant"}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Unique tenant name:"}),Object(l.jsx)("input",{className:"control",type:"text",name:"uniqueName",placeholder:"Unique name here",onChange:T})]}),Object(l.jsx)("div",{className:"field control",children:Object(l.jsx)("button",{className:"button is-link is-small ".concat(m.relations.primaryContactForWhichTenants.submitButtonState),type:"submit",children:"Submit"})})]})})})]})})}),!m.user.landlord&&Object(l.jsx)("div",{className:"columns",children:Object(l.jsx)("div",{className:"column",children:Object(l.jsxs)("div",{className:"box",children:[Object(l.jsx)("h5",{children:"Tenant Team Membership for"}),Object(l.jsx)("div",{className:"columns",children:Object(l.jsx)("div",{className:"column",children:Object(l.jsx)("div",{className:"field",children:m.user.tenantTeamMemberships&&m.user.tenantTeamMemberships.length>0?m.user.tenantTeamMemberships.map((function(e){return Object(l.jsx)(D,{tenantTeam:e,state:m,setState:b})})):Object(l.jsx)("div",{children:"Not a team member of any tenant"})})})}),Object(l.jsx)("form",{className:"columns",onSubmit:U,children:Object(l.jsx)("div",{className:"column",children:Object(l.jsxs)("div",{className:"box",children:[Object(l.jsx)("h6",{children:"Add tenant"}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Unique tenant name:"}),Object(l.jsx)("input",{className:"control",type:"text",name:"uniqueName",placeholder:"Unique name here",onChange:C})]}),Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Roles as a team member:"}),Object(l.jsx)("select",{name:"add-tenant-team-roles",id:"add-tenant-team-roles",multiple:!0,className:"control",style:{minWidth:"50%"},onChange:S,children:function(){for(var e=[],t=0,a=Object.values(c);t<a.length;t++){var s=a[t];e.push(Object(l.jsx)("option",{value:s,children:s}))}return e}()})]}),Object(l.jsx)("div",{className:"field control",children:Object(l.jsx)("button",{className:"button is-link is-small ".concat(m.relations.tenantTeamMemberships.submitButtonState),type:"submit",children:"Submit"})})]})})})]})})}),m.user.landlord&&Object(l.jsx)("div",{className:"columns",children:Object(l.jsx)("div",{className:"column",children:Object(l.jsx)("div",{className:"box",children:Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",children:"Account Officer For:"}),m.user.accountOfficerForWhichTenants&&m.user.accountOfficerForWhichTenants.length>0?m.user.accountOfficerForWhichTenants.entries:Object(l.jsx)("div",{children:"Not an account officer"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("button",{onClick:function(){return alert("Yet to be implemented"),!1},className:"button is-link is-small",children:"Make an account officer"})})]})})})})]})]})},R=function(e){var t=e.role;return Object(l.jsx)("div",{className:"columns",children:Object(l.jsx)("div",{className:"column",children:t.name})})},W=function(e){var t=e.tenant;return Object(l.jsx)("div",{className:"columns",children:Object(l.jsx)("div",{className:"column",children:t.uniqueName})})},q=function(e){var t=e.tenantTeam;return Object(l.jsxs)("div",{className:"columns",children:[Object(l.jsx)("div",{className:"column",children:t.tenantUniqueName}),Object(l.jsxs)("div",{className:"column",children:[Object(l.jsx)("div",{children:"Roles:"}),t.roles.map((function(e){return"".concat(e," ")}))]})]})},H=function(e){var t=e.user,a=Object(i.useContext)(I);return Object(l.jsxs)("div",{className:"modal modal-full-screen modal-fx-fadeInScale is-active",children:[Object(l.jsx)("div",{className:"modal-background"}),Object(l.jsxs)("div",{className:"modal-content",children:[Object(l.jsxs)("header",{className:"modal-card-head",children:[Object(l.jsx)("p",{className:"modal-card-title",children:"Details of ".concat(t.firstName)}),Object(l.jsx)("button",{className:"delete","aria-label":"close",onClick:function(){a.dispatch({type:"HandleCloseViewUser"})}})]}),Object(l.jsx)("section",{className:"modal-card-body",children:Object(l.jsxs)("div",{className:"columns",children:[Object(l.jsxs)("div",{className:"column is-two-thirds",children:[Object(l.jsxs)("div",{className:"columns",children:[Object(l.jsx)("div",{className:"column is-two-fifths",children:"First name:"}),Object(l.jsx)("div",{className:"column",children:t.firstName})]}),Object(l.jsxs)("div",{className:"columns",children:[Object(l.jsx)("div",{className:"column is-two-fifths",children:"Last name:"}),Object(l.jsx)("div",{className:"column",children:t.lastName})]}),Object(l.jsxs)("div",{className:"columns",children:[Object(l.jsx)("div",{className:"column is-two-fifths",children:"Middle name:"}),Object(l.jsx)("div",{className:"column",children:t.middleName})]}),Object(l.jsxs)("div",{className:"columns",children:[Object(l.jsx)("div",{className:"column is-two-fifths",children:"Common name:"}),Object(l.jsx)("div",{className:"column",children:t.commonName})]}),Object(l.jsxs)("div",{className:"columns",children:[Object(l.jsx)("div",{className:"column is-two-fifths",children:"Gender:"}),Object(l.jsx)("div",{className:"column",children:t.gender})]}),Object(l.jsxs)("div",{className:"columns",children:[Object(l.jsx)("div",{className:"column is-two-fifths",children:"Home address:"}),Object(l.jsx)("div",{className:"column",children:t.homeAddress})]}),Object(l.jsxs)("div",{className:"columns",children:[Object(l.jsx)("div",{className:"column is-two-fifths",children:"Phone numbers:"}),Object(l.jsxs)("div",{className:"column",children:[Object(l.jsxs)("div",{className:"columns",children:[Object(l.jsx)("div",{className:"column",children:"Office:"}),Object(l.jsx)("div",{className:"column",children:t.phone?t.phone.office[0]:""}),Object(l.jsx)("div",{className:"column",children:t.phone?t.phone.office[1]:""})]}),Object(l.jsxs)("div",{className:"columns",children:[Object(l.jsx)("div",{className:"column",children:"Mobile:"}),Object(l.jsx)("div",{className:"column",children:t.phone?t.phone.mobile[0]:""}),Object(l.jsx)("div",{className:"column",children:t.phone?t.phone.mobile[1]:""})]}),Object(l.jsxs)("div",{className:"columns",children:[Object(l.jsx)("div",{className:"column",children:"Home:"}),Object(l.jsx)("div",{className:"column",children:t.phone?t.phone.home[0]:""}),Object(l.jsx)("div",{className:"column",children:t.phone?t.phone.home[1]:""})]})]})]}),Object(l.jsxs)("div",{className:"columns",children:[Object(l.jsx)("div",{className:"column is-two-fifths",children:"Nationality:"}),Object(l.jsx)("div",{className:"column",children:t.nationality})]}),Object(l.jsxs)("div",{className:"columns",children:[Object(l.jsx)("div",{className:"column is-two-fifths",children:"State:"}),Object(l.jsx)("div",{className:"column",children:t.state})]}),Object(l.jsxs)("div",{className:"columns",children:[Object(l.jsx)("div",{className:"column is-two-fifths",children:"Zip:"}),Object(l.jsx)("div",{className:"column",children:t.zip})]}),Object(l.jsxs)("div",{className:"columns",children:[Object(l.jsx)("div",{className:"column is-two-fifths",children:"Landlord user?:"}),Object(l.jsx)("div",{className:"column",children:t.landlord?"Yes":"No"})]})]}),Object(l.jsxs)("div",{className:"column",children:[Object(l.jsx)("div",{className:"columns",children:Object(l.jsx)("div",{className:"column",children:Object(l.jsxs)("div",{className:"box",children:[Object(l.jsx)("h5",{children:"Photo"}),Object(l.jsx)("div",{className:"columns",children:Object(l.jsx)("div",{className:"column",children:Object(l.jsx)("img",{alt:"user",src:"/v1/users/".concat(t.id,"/photo")})})})]})})}),Object(l.jsx)("div",{className:"columns",children:Object(l.jsx)("div",{className:"column",children:Object(l.jsxs)("div",{className:"box",children:[Object(l.jsx)("h5",{children:"Assigned Roles"}),Object(l.jsx)("div",{className:"columns",children:Object(l.jsx)("div",{className:"column",children:Object(l.jsx)("div",{className:"field",children:t.roles&&t.roles.length>0?t.roles.map((function(e){return Object(l.jsx)(R,{role:e})})):Object(l.jsx)("div",{children:"No roles assigned to user yet"})})})})]})})}),!t.landlord&&Object(l.jsx)("div",{className:"columns",children:Object(l.jsx)("div",{className:"column",children:Object(l.jsxs)("div",{className:"box",children:[Object(l.jsx)("h5",{className:"label",children:"Primary contact for"}),Object(l.jsx)("div",{className:"columns",children:Object(l.jsx)("div",{className:"column",children:Object(l.jsx)("div",{className:"field",children:t.primaryContactForWhichTenants&&t.primaryContactForWhichTenants.length>0?t.primaryContactForWhichTenants.map((function(e){return Object(l.jsx)(W,{tenant:e})})):Object(l.jsx)("div",{children:"Not a primary contact for any tenant"})})})})]})})}),!t.landlord&&Object(l.jsx)("div",{className:"columns",children:Object(l.jsx)("div",{className:"column",children:Object(l.jsxs)("div",{className:"box",children:[Object(l.jsx)("h5",{children:"Tenant Team Membership for"}),Object(l.jsx)("div",{className:"columns",children:Object(l.jsx)("div",{className:"column",children:Object(l.jsx)("div",{className:"field",children:t.tenantTeamMemberships&&t.tenantTeamMemberships.length>0?t.tenantTeamMemberships.map((function(e){return Object(l.jsx)(q,{tenantTeam:e})})):Object(l.jsx)("div",{children:"Not a team member of any tenant"})})})})]})})})]})]})}),Object(l.jsx)("footer",{className:"modal-card-foot",children:Object(l.jsxs)("div",{className:"buttons are-small",children:[Object(l.jsx)("button",{className:"button is-warning",onClick:function(){a.dispatch({type:"HandleEditUser",payload:{id:t.id}})},children:"Edit"}),Object(l.jsx)("button",{className:"button is-danger",onClick:function(){window.confirm("This action cannot be reversed! Are you sure you want to delete?")&&a.handleDeleteUser(t.id,a.dispatch)},children:"Delete"})]})})]})]})},I=o.a.createContext(null),V=function(e){var t={users:[],usersCount:0,user:null,onAddUser:!1,onViewUser:!1,onEditUser:!1,alert:{show:!1,message:"",type:""},actionButtonState:x.b},a=Object(i.useReducer)(p,t),s=Object(h.a)(a,2),n=s[0],c=s[1],r={relations:["roles","primaryContactForWhichTenants","tenantTeamMemberships"]};Object(i.useEffect)((function(){y(c,r)}),[]),Object(i.useEffect)((function(){window.scrollTo(0,0)}),[n.alert]);var o=Object(l.jsx)(g.a,{type:n.alert.type,message:n.alert.message,onClickHandler:function(){c({type:"HandleCloseAlert"})}});return n.onEditUser&&null!==n.user?Object(l.jsx)("div",{className:"container ",children:Object(l.jsxs)("div",{className:"content is-medium",children:[Object(l.jsx)("p",{children:n.alert.show&&o}),Object(l.jsx)("p",{children:Object(l.jsx)(P,{user:n.user,handleUpdateUser:T,currentUsers:n.users,dispatch:c})}),Object(l.jsx)("p",{children:Object(l.jsx)(I.Provider,{value:{dispatch:c,handleDeleteUser:w,currentUsers:n.users},children:Object(l.jsx)(B,{users:n.users})})})]})}):n.onAddUser?Object(l.jsx)("div",{className:"container ",children:Object(l.jsxs)("div",{className:"content is-medium",children:[Object(l.jsx)("p",{children:n.alert.show&&o}),Object(l.jsx)("p",{children:Object(l.jsx)(k,{handleCreateUser:C,currentUsers:n.users,dispatch:c})}),Object(l.jsx)("p",{children:Object(l.jsx)(I.Provider,{value:{dispatch:c,handleDeleteUser:w,currentUsers:n.users},children:Object(l.jsx)(B,{users:n.users})})})]})}):n.onViewUser&&null!=n.user?Object(l.jsx)("div",{className:"container ",children:Object(l.jsx)("div",{className:"content is-medium",children:Object(l.jsx)("p",{children:Object(l.jsx)(I.Provider,{value:{dispatch:c,handleDeleteUser:w,currentUsers:n.users},children:Object(l.jsx)(H,{user:n.user})})})})}):Object(l.jsx)("div",{className:"container ",children:Object(l.jsxs)("div",{className:"content is-medium",children:[Object(l.jsx)("p",{children:Object(l.jsx)("button",{className:"button is-outline",onClick:function(){c({type:"HandleOnAddUser"})},children:"+ Add User"})}),Object(l.jsx)("p",{children:n.alert.show&&o}),Object(l.jsx)("p",{children:Object(l.jsx)(I.Provider,{value:{dispatch:c,handleDeleteUser:w,currentUsers:n.users},children:Object(l.jsx)(B,{users:n.users})})})]})})},z=function(){return Object(l.jsx)("div",{children:Object(l.jsx)("button",{className:"button is-text is-loading",children:"   "})})},Y=Object(u.a)((function(){return a.e(3).then(a.bind(null,42))}),{fallback:Object(l.jsx)(z,{})}),G=function(e){var t=e.baseUrl;return Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"navbar is-transparent",role:"navigation","aria-label":"main navigation",children:Object(l.jsxs)("div",{className:"container ",children:[Object(l.jsx)("div",{className:"navbar-brand",children:Object(l.jsxs)("a",{role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false","data-target":"userClientAppMenu",children:[Object(l.jsx)("span",{"aria-hidden":"true"}),Object(l.jsx)("span",{"aria-hidden":"true"}),Object(l.jsx)("span",{"aria-hidden":"true"})]})}),Object(l.jsx)("div",{id:"userClientAppMenu",className:"navbar-menu",children:Object(l.jsxs)("div",{className:"navbar-start",children:[Object(l.jsx)(m.b,{activeClassName:"is-active",to:"".concat(t,"/"),children:Object(l.jsx)("a",{className:"navbar-item",children:"User Admin"})}),Object(l.jsx)(m.b,{activeClassName:"is-active",to:"".concat(t,"/role-admin"),children:Object(l.jsx)("a",{className:"navbar-item",children:"Role Admin"})})]})})]})}),Object(l.jsxs)(b.c,{children:[Object(l.jsx)(b.a,{exact:!0,path:"".concat(t,"/"),component:V}),Object(l.jsx)(b.a,{exact:!0,path:"".concat(t,"/role-admin"),component:Y}),Object(l.jsx)(b.a,{path:"".concat(t,"/hello/:name"),render:function(e){var t=e.match;return Object(l.jsxs)("h3",{children:["Hello ",t.params.name]})}}),Object(l.jsx)(b.a,{render:function(){return Object(l.jsx)("h3",{children:"Page not found"})}})]})]})},J=function(e){e&&e instanceof Function&&a.e(4).then(a.bind(null,41)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))};j.a.hydrate(Object(l.jsx)(m.a,{children:Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(G,{baseUrl:"/v1/users/web"})})}),document.getElementById("root")),J()}},[[40,1,2]]]);
//# sourceMappingURL=main.bf185490.chunk.js.map